# Integration Test Cases - Order Management Screen

## 1. View and Search Orders (8 test cases)

| Test Case ID         | Test Case Description                                          | Test Case Procedure                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Expected Results                                                                                                                                                                                              | Pre-conditions                                       |
| -------------------- | -------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------- |
| TC-ORDER-VIEW-001   | Verify Order Management page UI elements are displayed correctly | 1. Navigate to order management page (/quanlysancaulong/(private)/orders)<br>2. Verify breadcrumb is displayed: "Quản trị ứng dụng" > "Quản lý đơn hàng"<br>3. Verify SearchOrders component is displayed with filters: status, payment method, customer ID, date range<br>4. Verify table is displayed with columns: Mã đơn hàng, Khách hàng, Sân, Thời gian, Trạng thái, Phương thức thanh toán, Tổng tiền, Ngày tạo<br>5. Verify "Tổng số đơn hàng" counter is displayed<br>6. Verify "Tải lại" button is displayed | All UI elements are displayed correctly. Breadcrumb is visible. Search form is displayed. Table columns are correct. Summary information is shown. | User is logged in with admin/staff role              |
| TC-ORDER-VIEW-002   | Verify orders table displays data correctly                    | 1. Navigate to order management page<br>2. Wait for orders to load<br>3. Verify orders are displayed in table<br>4. Verify each row shows: order code/ID, customer name and phone, court name and area, date, time range, status tag, payment method, total amount (formatted), creation date<br>5. Verify status tags have correct colors: orange (Pending), green (Paid), red (Cancelled), blue (Refunded) | Orders table displays correctly. All columns show correct data. Status tags have appropriate colors. Amounts are formatted with VN locale. | User is logged in. Orders exist                      |
| TC-ORDER-VIEW-003   | Verify table summary shows total amount correctly              | 1. Navigate to order management page<br>2. Wait for orders to load<br>3. Verify table summary row is displayed at bottom<br>4. Verify "Tổng tiền tất cả đơn hàng:" label is shown<br>5. Verify total amount is calculated correctly (sum of all order totalAmount)<br>6. Verify total amount is formatted with VN locale | Table summary displays correctly. Total amount is calculated correctly. Amount is formatted properly. | User is logged in. Orders exist                      |
| TC-ORDER-VIEW-004   | Verify filtering by status                                     | 1. Navigate to order management page<br>2. Click on "Trạng thái" dropdown in search form<br>3. Select "Chờ thanh toán"<br>4. Click "Tìm kiếm" button<br>5. Wait for results to load<br>6. Verify only orders with status "Pending" are displayed<br>7. Verify "Tổng số đơn hàng" counter updates<br>8. Select "Đã thanh toán"<br>9. Verify only orders with status "Paid" are displayed | Filtering by status works correctly. Only matching orders are displayed. Counter updates correctly. | User is logged in. Orders with different statuses exist |
| TC-ORDER-VIEW-005   | Verify filtering by payment method                             | 1. Navigate to order management page<br>2. Click on "Phương thức thanh toán" dropdown<br>3. Select "Tiền mặt"<br>4. Click "Tìm kiếm" button<br>5. Wait for results<br>6. Verify only orders with payment method "Cash" are displayed<br>7. Select "Chuyển khoản"<br>8. Verify only orders with payment method "BankTransfer" are displayed | Filtering by payment method works correctly. Only matching orders are displayed. Filter updates immediately. | User is logged in. Orders with different payment methods exist |
| TC-ORDER-VIEW-006   | Verify filtering by customer ID                               | 1. Navigate to order management page<br>2. Enter a customer ID in "Mã khách hàng" input field<br>3. Click "Tìm kiếm" button<br>4. Wait for results<br>5. Verify only orders for that customer are displayed<br>6. Verify customer information matches in table rows | Filtering by customer ID works correctly. Only matching orders are displayed. Customer information is correct. | User is logged in. Orders for specific customer exist |
| TC-ORDER-VIEW-007   | Verify filtering by date range                                 | 1. Navigate to order management page<br>2. Click on "Khoảng thời gian" date range picker<br>3. Select a start date and end date<br>4. Click "Tìm kiếm" button<br>5. Wait for results<br>6. Verify only orders created within the date range are displayed<br>7. Verify dates are formatted correctly (DD/MM/YYYY) | Filtering by date range works correctly. Only orders within date range are displayed. Date format is correct. | User is logged in. Orders with different creation dates exist |
| TC-ORDER-VIEW-008   | Verify reset search functionality                              | 1. Navigate to order management page<br>2. Apply multiple filters (status, payment method, customer ID, date range)<br>3. Click "Làm mới" button<br>4. Verify all filter fields are cleared<br>5. Verify all orders are displayed (no filters applied)<br>6. Verify "Tổng số đơn hàng" counter shows total count | Reset functionality works correctly. All filters are cleared. All orders are displayed. Counter shows total count. | User is logged in. Orders exist                      |

## 2. View Order Details (5 test cases)

| Test Case ID         | Test Case Description                                          | Test Case Procedure                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Expected Results                                                                                                                                                                                              | Pre-conditions                                       |
| -------------------- | -------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------- |
| TC-ORDER-DETAIL-001 | Verify expandable row functionality                            | 1. Navigate to order management page<br>2. Wait for orders to load<br>3. Click on an order row<br>4. Verify row expands to show order details<br>5. Verify tabs are displayed: "Thông tin cơ bản", "Lịch sử thanh toán"<br>6. Click on another order row<br>7. Verify previous row collapses and new row expands (only one row expanded at a time) | Expandable row works correctly. Row expands on click. Tabs are displayed. Only one row can be expanded at a time. | User is logged in. Orders exist                     |
| TC-ORDER-DETAIL-002 | Verify order basic information displays correctly              | 1. Click on an order row to expand<br>2. Verify "Thông tin cơ bản" tab is active by default<br>3. Verify "Thông tin đơn hàng" section displays: order code/ID, status tag, customer name, phone, email, payment method, court ID, usage date, time range, court status, creation date, note<br>4. Verify all fields are populated correctly | Order basic information displays correctly. All fields are shown. Data is accurate. | User is logged in. Order selected                  |
| TC-ORDER-DETAIL-003 | Verify order items list displays correctly                     | 1. Expand an order row<br>2. Verify "Món hàng đã đặt" section is displayed in left column<br>3. If order items exist, verify each item shows: product image, product name, quantity, unit price, total price<br>4. Verify prices are formatted with VN locale<br>5. If no items, verify "Không có món hàng nào" empty state is shown | Order items list displays correctly. Product information is shown. Prices are formatted correctly. Empty state is shown when no items. | User is logged in. Order with/without items selected |
| TC-ORDER-DETAIL-004 | Verify services list displays correctly                        | 1. Expand an order row<br>2. Verify "Dịch vụ đã sử dụng" section is displayed in right column<br>3. If services exist, verify each service shows: service name, quantity, unit price per hour, start time, end time, usage duration, status, total cost<br>4. Verify usage duration is calculated correctly (hours, minutes, seconds)<br>5. If no services, verify "Không có dịch vụ nào" empty state is shown | Services list displays correctly. Service information is shown. Usage duration is calculated correctly. Empty state is shown when no services. | User is logged in. Order with/without services selected |
| TC-ORDER-DETAIL-005 | Verify financial information displays correctly                 | 1. Expand an order row<br>2. Verify "Thông tin tài chính" section displays<br>3. Verify following items are shown: Tiền sân, Tiền sân đã trả, Tiền sân còn lại, Tổng tiền hàng, Tổng tiền dịch vụ, Phí muộn (if > 0), Tổng tiền (highlighted in green, bold, large)<br>4. Verify all amounts are formatted with VN locale<br>5. Verify "Tổng tiền" is calculated correctly | Financial information displays correctly. All financial items are shown. Amounts are formatted correctly. Total amount is calculated correctly. | User is logged in. Order selected                   |

## 3. View Payment History (5 test cases)

| Test Case ID         | Test Case Description                                          | Test Case Procedure                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Expected Results                                                                                                                                                                                              | Pre-conditions                                       |
| -------------------- | -------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------- |
| TC-ORDER-PAYMENT-001 | Verify payment history tab displays correctly                  | 1. Expand an order row<br>2. Click on "Lịch sử thanh toán" tab<br>3. Verify tab switches correctly<br>4. Verify payment history table is displayed with columns: Payment ID, Số tiền, Trạng thái, Ngày tạo, Ghi chú<br>5. Verify table is bordered and has small size | Payment history tab displays correctly. Tab switching works. Table columns are correct. Table styling is correct. | User is logged in. Order with payment history selected |
| TC-ORDER-PAYMENT-002 | Verify payment history table displays payment data correctly  | 1. Click on "Lịch sử thanh toán" tab<br>2. If payments exist, verify each payment row shows: payment ID (monospace font), amount (formatted, green color), status tag (with color), creation date (formatted), note<br>3. Verify status tags have correct colors: orange (PendingPayment), green (Paid), red (Cancelled)<br>4. Verify amounts are formatted with VN locale | Payment history table displays correctly. Payment information is shown. Status tags have appropriate colors. Amounts are formatted correctly. | User is logged in. Order with payments selected     |
| TC-ORDER-PAYMENT-003 | Verify empty state when no payment history exists              | 1. Expand an order row<br>2. Click on "Lịch sử thanh toán" tab<br>3. If order has no payments, verify "Không có lịch sử thanh toán" message is displayed<br>4. Verify message is centered and gray colored | Empty state is displayed correctly when no payment history exists. Message is shown appropriately. | User is logged in. Order without payment history selected |
| TC-ORDER-PAYMENT-004 | Verify payment ID is displayed in monospace font               | 1. Click on "Lịch sử thanh toán" tab<br>2. Verify payment IDs are displayed in monospace font (font-mono class)<br>3. Verify payment IDs are shown in small text size | Payment IDs are displayed in monospace font. Text size is appropriate. | User is logged in. Order with payments selected     |
| TC-ORDER-PAYMENT-005 | Verify payment amounts are highlighted in green                | 1. Click on "Lịch sử thanh toán" tab<br>2. Verify payment amounts are displayed in green color (text-green-600)<br>3. Verify amounts are formatted with VN locale<br>4. Verify amounts are displayed in medium font weight | Payment amounts are highlighted in green. Amounts are formatted correctly. Font weight is appropriate. | User is logged in. Order with payments selected     |

## 4. Extend Payment (5 test cases)

| Test Case ID         | Test Case Description                                          | Test Case Procedure                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Expected Results                                                                                                                                                                                              | Pre-conditions                                       |
| -------------------- | -------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------- |
| TC-ORDER-EXTEND-001 | Verify "Gia hạn thanh toán" button is visible for cancelled orders | 1. Navigate to order management page<br>2. Find an order with status "Cancelled"<br>3. Expand the order row<br>4. Verify "Gia hạn thanh toán" button is visible in "Thông tin cơ bản" tab<br>5. Verify button has StopOutlined icon | "Gia hạn thanh toán" button is visible for cancelled orders. Button icon is correct. | User is logged in. Cancelled order exists           |
| TC-ORDER-EXTEND-002 | Verify extend payment button is not visible for other statuses  | 1. Navigate to order management page<br>2. Find orders with status "Pending", "Paid", or "Refunded"<br>3. Expand each order row<br>4. Verify "Gia hạn thanh toán" button is NOT visible for these statuses | Extend payment button is not visible for non-cancelled orders. Button only appears for cancelled orders. | User is logged in. Orders with different statuses exist |
| TC-ORDER-EXTEND-003 | Verify extend payment confirmation modal                       | 1. Expand a cancelled order row<br>2. Click "Gia hạn thanh toán" button<br>3. Verify confirmation modal appears<br>4. Verify modal title is "Gia hạn thanh toán"<br>5. Verify modal content shows: "Bạn có chắc chắn muốn gia hạn thanh toán cho đơn hàng {orderId} thêm 5 phút?"<br>6. Verify "OK" and "Cancel" buttons are displayed | Confirmation modal appears correctly. Modal title and content are correct. Buttons are displayed. | User is logged in. Cancelled order selected         |
| TC-ORDER-EXTEND-004 | Verify successful payment extension                             | 1. Expand a cancelled order row<br>2. Click "Gia hạn thanh toán" button<br>3. Verify confirmation modal appears<br>4. Click "OK" button in modal<br>5. Wait for API response<br>6. Verify success message "Gia hạn thanh toán thành công!" is displayed<br>7. Verify modal closes | Payment extension is successful. Success message is displayed. Modal closes after confirmation. | User is logged in. Cancelled order selected. API call succeeds |
| TC-ORDER-EXTEND-005 | Verify cancel extend payment                                   | 1. Expand a cancelled order row<br>2. Click "Gia hạn thanh toán" button<br>3. Verify confirmation modal appears<br>4. Click "Cancel" button or close modal<br>5. Verify modal closes<br>6. Verify no API call is made<br>7. Verify no success message is displayed | Cancelling extend payment works correctly. Modal closes. No API call is made. No success message is shown. | User is logged in. Cancelled order selected         |

## 5. Data Refresh and Navigation (3 test cases)

| Test Case ID         | Test Case Description                                          | Test Case Procedure                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Expected Results                                                                                                                                                                                              | Pre-conditions                                       |
| -------------------- | -------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------- |
| TC-ORDER-REFRESH-001 | Verify "Tải lại" button refreshes orders data                  | 1. Navigate to order management page<br>2. Note the current orders displayed<br>3. Click "Tải lại" button<br>4. Verify loading state is shown<br>5. Wait for data to refresh<br>6. Verify orders are reloaded<br>7. Verify "Tổng số đơn hàng" counter updates if data changed | Refresh button works correctly. Loading state is shown. Orders are reloaded. Counter updates if needed. | User is logged in. Network available                |
| TC-ORDER-REFRESH-002 | Verify table scroll functionality                               | 1. Navigate to order management page<br>2. Verify table has vertical scroll (y: "500px")<br>3. Verify table has horizontal scroll (x: "max-content")<br>4. Scroll vertically to verify scrolling works<br>5. Scroll horizontally to verify scrolling works | Table scroll functionality works correctly. Vertical and horizontal scrolling are enabled. Scrolling is smooth. | User is logged in. Many orders exist (more than visible area) |
| TC-ORDER-REFRESH-003 | Verify expandable row state persists after refresh             | 1. Navigate to order management page<br>2. Expand an order row<br>3. Click "Tải lại" button<br>4. Wait for data to refresh<br>5. Verify expanded row collapses after refresh<br>6. Verify table shows updated data | Expandable row state is reset after refresh. Table shows updated data. User can expand rows again after refresh. | User is logged in. Order selected                    |

