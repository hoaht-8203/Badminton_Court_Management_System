# Integration Test Cases - Customer Management Module

## 1. View and Filter Customers (5 test cases)

| Test Case ID         | Test Case Description                                               | Test Case Procedure                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Expected Results                                                                                                                                                                                              | Pre-conditions                                       |
| -------------------- | ------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------- |
| TC-CUSTOMER-VIEW-001 | Verify Customer Management page UI elements are displayed correctly | 1. Navigate to customer management page (/quanlysancaulong/(private)/customers)<br>2. Verify breadcrumb shows "Quản trị ứng dụng > Quản lý khách hàng"<br>3. Verify "Lọc dữ liệu" search card is displayed<br>4. Verify table with columns: Mã khách hàng, Họ và tên (with avatar), Số điện thoại, Email, Giới tính, Địa chỉ, Trạng thái, Ngày sửa đổi lần cuối, Người sửa đổi lần cuối<br>5. Verify "Tổng số khách hàng" counter is displayed<br>6. Verify action buttons: "Thêm khách hàng", "Tải lại"                                         | All UI elements are displayed correctly. Search form is visible with filter fields. Table structure is shown with required columns. Action buttons are visible and styled. Total customer count is displayed. | User is logged in with admin/staff role              |
| TC-CUSTOMER-VIEW-002 | Verify customer list is loaded and displayed correctly              | 1. Navigate to customer management page<br>2. Wait for customer list to load<br>3. Verify table displays all customers<br>4. Verify each row shows: customer ID, full name with avatar (or default icon), phone number (or "-"), email (or "-"), gender (or "-"), address (or "-"), status with color coding (green for "Đang hoạt động", red for "Không hoạt động"), updated date/time, updated by user<br>5. Verify status colors are displayed correctly                                                                                      | Customer list loads successfully. All customers appear in table with correctly formatted data. Avatar is displayed if available, or default icon if not. Status colors are correct. No spinner after load.    | User is logged in. Customer data exists              |
| TC-CUSTOMER-VIEW-003 | Verify search customer by multiple filters                          | 1. Navigate to customer management page<br>2. Wait for customer list to load<br>3. Enter partial name in "Tìm kiếm theo tên khách hàng" field<br>4. Enter phone number in "Tìm kiếm theo số điện thoại" field<br>5. Select gender from "Tìm kiếm theo giới tính" dropdown<br>6. Select status from "Tìm kiếm theo trạng thái" dropdown<br>7. Click "Tìm kiếm" button<br>8. Verify table shows only customers matching all filters<br>9. Verify total count updates<br>10. Click "Reset" button<br>11. Verify all customers are displayed         | Multiple filters work correctly together. Table updates to show only matching customers. Total count reflects filtered results. Reset clears all filters and shows all customers.                             | User is logged in. Customers with various data exist |
| TC-CUSTOMER-VIEW-004 | Verify expandable row to view customer details                      | 1. Navigate to customer management page<br>2. Wait for customer list to load<br>3. Click a customer row to expand<br>4. Verify expanded content shows: customer ID, full name, phone number, email, gender (or "-"), date of birth (formatted as DD/MM/YYYY or "-"), ID card (or "-"), status with color coding, address (or "-"), city (or "-"), district (or "-"), ward (or "-"), note (or "-")<br>5. Verify action buttons: "Cập nhật khách hàng", status change buttons ("Ngừng hoạt động" or "Kích hoạt")<br>6. Click row again to collapse | Row expands successfully. Expanded content shows all customer details correctly. Status buttons are visible based on current status. Row collapses on second click.                                           | User is logged in. Customer data exists              |
| TC-CUSTOMER-VIEW-005 | Verify reload data functionality and total count                    | 1. Navigate to customer management page<br>2. Wait for data to load<br>3. Note total customer count<br>4. Click "Tải lại" button<br>5. Observe loading state<br>6. Wait for data to reload<br>7. Verify table refreshes and total count updates                                                                                                                                                                                                                                                                                                  | Reload triggers data refresh. Loading state appears during fetch. Table and count update with latest data.                                                                                                    | User is logged in. Network available                 |

## 2. Create Customer (5 test cases)

| Test Case ID           | Test Case Description                                              | Test Case Procedure                                                                                                                                                                                                                                                                                                                                                                                                                              | Expected Results                                                                                                                                     | Pre-conditions                                |
| ---------------------- | ------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------- |
| TC-CUSTOMER-CREATE-001 | Verify Create Customer Drawer opens and displays correctly         | 1. Click "Thêm khách hàng" button<br>2. Verify Create Customer Drawer opens<br>3. Verify form fields: Họ và tên (required), Số điện thoại (required), Email (required), Giới tính (optional), Ngày sinh (optional), Số CMND/CCCD (optional), Địa chỉ (optional), Thành phố/Tỉnh (optional), Quận/Huyện (optional), Phường/Xã (optional), Ghi chú (optional), Ảnh đại diện (optional)<br>4. Verify "Tạo khách hàng" and "Hủy" buttons are visible | Drawer opens with correct title. All form fields and action buttons are visible. Required fields are marked appropriately.                           | User is logged in with admin/staff role       |
| TC-CUSTOMER-CREATE-002 | Verify successful customer creation with all required fields       | 1. Open Create Customer Drawer<br>2. Enter valid full name (min 2 characters)<br>3. Enter valid phone number (10-11 digits)<br>4. Enter valid email format<br>5. Fill optional fields (gender, date of birth, address, etc.)<br>6. (Optional) Upload avatar image<br>7. Click "Tạo khách hàng"<br>8. Wait for API response                                                                                                                       | Customer created successfully. Success message "Tạo khách hàng thành công!" is shown. Drawer closes. Customer appears in list with correct data.     | User is logged in.                            |
| TC-CUSTOMER-CREATE-003 | Verify validation errors when required fields are empty or invalid | 1. Open Create Customer Drawer<br>2. Leave full name empty and click "Tạo khách hàng"<br>3. Verify error "Họ và tên là bắt buộc"<br>4. Enter full name with less than 2 characters<br>5. Verify error "Họ và tên phải có ít nhất 2 ký tự"<br>6. Enter invalid phone number format<br>7. Verify error "Số điện thoại không hợp lệ"<br>8. Enter invalid email format<br>9. Verify error "Email không hợp lệ"                                       | Validation errors are displayed for empty or invalid required fields. Submission is blocked. No API call made.                                       | User is logged in                             |
| TC-CUSTOMER-CREATE-004 | Verify customer creation with avatar upload                        | 1. Open Create Customer Drawer<br>2. Fill required fields<br>3. Click "Chọn ảnh đại diện" button<br>4. Select valid image file (JPG, PNG, GIF, WebP)<br>5. Wait for upload to complete<br>6. Verify image preview appears<br>7. Verify upload success message<br>8. Click "Tạo khách hàng"<br>9. Verify customer is created with avatar<br>10. Verify avatar is displayed in table                                                               | Image uploads successfully. Upload progress is shown. Image preview is displayed. Customer is created with avatar URL. Avatar is shown in table row. | User is logged in. Valid image file available |
| TC-CUSTOMER-CREATE-005 | Verify cancel customer creation resets form                        | 1. Open Create Customer Drawer<br>2. Fill in all fields (required and optional)<br>3. Upload avatar image<br>4. Click "Hủy" button or close drawer<br>5. Verify drawer closes<br>6. Verify uploaded image is deleted from server<br>7. Reopen Create Customer Drawer<br>8. Verify form is empty                                                                                                                                                  | Drawer closes successfully. Uploaded image is deleted from server. Form is reset. Reopening drawer shows empty form. No data persists.               | User is logged in                             |

## 3. Update Customer (5 test cases)

| Test Case ID           | Test Case Description                                    | Test Case Procedure                                                                                                                                                                                                                                                                                                                                                                                                                         | Expected Results                                                                                                                                                                                                                    | Pre-conditions                     |
| ---------------------- | -------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------- |
| TC-CUSTOMER-UPDATE-001 | Verify Update Customer Drawer opens with pre-filled data | 1. Navigate to customer management page<br>2. Wait for customer list to load<br>3. Expand a customer row<br>4. Click "Cập nhật khách hàng" button<br>5. Verify Update Customer Drawer opens<br>6. Wait for customer detail to load<br>7. Verify loading spinner is shown while fetching<br>8. Verify fields are pre-filled: full name, phone number, email, gender, date of birth (formatted), ID card, address, city, district, ward, note | Drawer opens with correct title. Loading spinner is shown while fetching detail. All form fields are pre-filled with existing customer data. Date of birth is formatted correctly. Ready for edit.                                  | User is logged in. Customer exists |
| TC-CUSTOMER-UPDATE-002 | Verify successful customer update                        | 1. Open Update Customer Drawer for a customer<br>2. Wait for data to load<br>3. Modify full name<br>4. Update phone number<br>5. Change email<br>6. Update address fields<br>7. Modify other optional fields<br>8. Click "Lưu thay đổi" button<br>9. Wait for API response                                                                                                                                                                  | Customer updated successfully. Success message "Cập nhật khách hàng thành công!" is shown. Drawer closes automatically. Table refreshes to show updated information. Updated data is displayed correctly in table and expanded row. | User is logged in. Customer exists |
| TC-CUSTOMER-UPDATE-003 | Verify validation errors when updating with invalid data | 1. Open Update Customer Drawer<br>2. Wait for data to load<br>3. Clear full name field<br>4. Enter invalid phone number format<br>5. Enter invalid email format<br>6. Enter full name with less than 2 characters<br>7. Click "Lưu thay đổi"<br>8. Verify validation errors are displayed                                                                                                                                                   | Validation blocks save. Error messages shown: "Họ và tên là bắt buộc", "Họ và tên phải có ít nhất 2 ký tự", "Số điện thoại không hợp lệ", "Email không hợp lệ". No API call.                                                        | User is logged in. Customer exists |
| TC-CUSTOMER-UPDATE-004 | Verify updating customer date of birth                   | 1. Open Update Customer Drawer<br>2. Wait for data to load<br>3. Verify current date of birth is displayed (if exists)<br>4. Select a new date from date picker<br>5. Verify new date is displayed in DD/MM/YYYY format<br>6. Click "Lưu thay đổi"<br>7. Verify date of birth is updated<br>8. Expand customer row and verify date is displayed correctly                                                                                   | Current date of birth is displayed correctly. Date picker allows selection of new date. Customer is updated with new date of birth. Success message is displayed. Updated date is shown in expanded row view in DD/MM/YYYY format.  | User is logged in. Customer exists |
| TC-CUSTOMER-UPDATE-005 | Verify cancel update keeps original data                 | 1. Open Update Customer Drawer<br>2. Wait for data to load<br>3. Modify full name, phone number, email, and address fields<br>4. Change date of birth<br>5. Update other optional fields<br>6. Click "Hủy" button or close drawer<br>7. Verify drawer closes<br>8. Expand customer row again<br>9. Click "Cập nhật khách hàng" again<br>10. Verify original data is still displayed                                                         | Drawer closes successfully. Changes are not saved. Original customer data remains unchanged. Opening update drawer again shows original data. No modifications are persisted.                                                       | User is logged in. Customer exists |

## 4. Change Customer Status (3 test cases)

| Test Case ID           | Test Case Description                             | Test Case Procedure                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | Expected Results                                                                                                                                                                                                                                                                                                              | Pre-conditions                                          |
| ---------------------- | ------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------- |
| TC-CUSTOMER-STATUS-001 | Verify change customer status to Inactive         | 1. Navigate to customer management page<br>2. Wait for customer list to load<br>3. Expand a customer row with status "Active"<br>4. Verify "Ngừng hoạt động" button is visible<br>5. Click "Ngừng hoạt động" button<br>6. Verify confirmation modal appears with title "Xác nhận"<br>7. Verify modal message: "Bạn có chắc chắn muốn ngừng hoạt động khách hàng này?"<br>8. Click "OK" in confirmation modal<br>9. Wait for API response<br>10. Verify customer status changes to "Không hoạt động" (red color)<br>11. Verify "Ngừng hoạt động" button is hidden, "Kích hoạt" button appears | Confirmation modal appears correctly. Status is updated to "Inactive" successfully. Success message "Cập nhật trạng thái khách hàng thành công!" is displayed. Status column shows "Không hoạt động" in red. Button visibility is updated correctly. Table refreshes to show new status. Expanded row status is also updated. | User is logged in. Customer exists with status Active   |
| TC-CUSTOMER-STATUS-002 | Verify change customer status to Active           | 1. Navigate to customer management page<br>2. Wait for customer list to load<br>3. Expand a customer row with status "Inactive"<br>4. Verify "Kích hoạt" button is visible<br>5. Click "Kích hoạt" button<br>6. Verify confirmation modal appears<br>7. Click "OK" in confirmation modal<br>8. Wait for API response<br>9. Verify customer status changes to "Đang hoạt động" (green color)<br>10. Verify "Kích hoạt" button is hidden, "Ngừng hoạt động" button appears                                                                                                                     | Confirmation modal appears. Status is updated to "Active" successfully. Success message "Cập nhật trạng thái khách hàng thành công!" is displayed. Status column shows "Đang hoạt động" in green. Button visibility is updated correctly. Table refreshes to show new status. Expanded row status is also updated.            | User is logged in. Customer exists with status Inactive |
| TC-CUSTOMER-STATUS-003 | Verify cancel status change in confirmation modal | 1. Navigate to customer management page<br>2. Wait for customer list to load<br>3. Expand a customer row<br>4. Click a status change button (e.g., "Ngừng hoạt động")<br>5. Verify confirmation modal appears<br>6. Click "Cancel" or close modal<br>7. Verify modal closes<br>8. Verify customer status remains unchanged<br>9. Verify status in table is still the same                                                                                                                                                                                                                    | Confirmation modal can be cancelled. Modal closes without changes. Customer status remains unchanged. No API call is made. Table shows original status. User can try again if needed.                                                                                                                                         | User is logged in. Customer exists                      |
