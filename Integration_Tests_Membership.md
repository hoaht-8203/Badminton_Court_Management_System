# Integration Test Cases - View & Register Membership Module

## Test Cases Table

| Test Case ID | Test Case Description | Test Case Procedure | Expected Results | Pre-conditions |
|--------------|----------------------|---------------------|------------------|----------------|
| TC-MEMBERSHIP-001 | Verify Membership page UI elements are displayed correctly | 1. Navigate to profile page (/homepage/profile)<br>2. Click on "Hội viên" tab in the menu<br>3. Verify "Quản lý hội viên" title is displayed<br>4. Verify "Thông tin gói hội viên của bạn" subtitle is displayed<br>5. Verify "Danh sách gói hội viên" section title is displayed<br>6. Verify membership cards are displayed (if available)<br>7. Verify each membership card shows: name, logo, price, duration, features, "Đăng ký ngay" button | All UI elements are displayed correctly. Current membership section is shown (if user has membership) or info alert (if no membership). Available memberships list is displayed with cards. All membership information is visible and properly styled. | User is logged in |
| TC-MEMBERSHIP-002 | Verify current membership information is displayed correctly when user has active membership | 1. Navigate to profile page<br>2. Click on "Hội viên" tab<br>3. Wait for data to load<br>4. Verify current membership card is displayed<br>5. Verify membership card shows: status badge ("Đang hoạt động", "Đã hết hạn", or "Chưa kích hoạt"), membership logo, membership name, "Đã thanh toán" badge (if paid)<br>6. Verify membership details: start date (DD/MM/YYYY), end date (DD/MM/YYYY), remaining days, status<br>7. Verify status colors: green for active, red for expired, orange for not activated | Current membership card is displayed with correct styling based on membership level (silver/gold/platinum). All membership information is displayed correctly. Status badge shows correct text and styling. Dates are formatted correctly. Remaining days calculation is accurate. | User is logged in. User has an active membership |
| TC-MEMBERSHIP-003 | Verify empty state is displayed when user has no membership | 1. Navigate to profile page<br>2. Click on "Hội viên" tab<br>3. Wait for data to load<br>4. Verify info alert is displayed<br>5. Verify alert message: "Bạn chưa có gói hội viên"<br>6. Verify alert description: "Vui lòng chọn một gói hội viên bên dưới để đăng ký"<br>7. Verify available memberships list is still displayed below | Info alert is displayed with correct message and description. Alert has info type styling with icon. Current membership card is not shown. Available memberships section is displayed below. | User is logged in. User has no membership |
| TC-MEMBERSHIP-004 | Verify available memberships list is displayed correctly | 1. Navigate to profile page<br>2. Click on "Hội viên" tab<br>3. Wait for memberships data to load<br>4. Verify membership cards are displayed for active memberships only<br>5. For each membership card, verify: membership name, logo (silver/gold/platinum based on level), status ("Đang hoạt động"), price (formatted with VN locale), duration in days, features list (duration, discount if applicable, payment method), discount badge (if applicable), "Đăng ký ngay" button | Available memberships are displayed in card format. Only active memberships are shown. Each card displays all required information correctly. Price is formatted with thousand separators. Features are listed with check icons. Discount information is displayed if applicable. | User is logged in. Active memberships exist in the system |
| TC-MEMBERSHIP-005 | Verify successful membership registration with confirmation | 1. Navigate to profile page<br>2. Click on "Hội viên" tab<br>3. Wait for memberships to load<br>4. Click "Đăng ký ngay" button on a membership card<br>5. Verify confirmation modal appears<br>6. Verify modal displays: membership name, price (formatted), duration in days, note about bank transfer payment<br>7. Click "Đăng ký" button in modal<br>8. Wait for API response | Confirmation modal is displayed with correct membership information. Modal shows "Xác nhận đăng ký gói hội viên" title. All membership details are shown correctly. Clicking "Đăng ký" triggers registration. Success message "Đăng ký gói hội viên thành công!" is displayed. User context is refreshed. | User is logged in. User has no active membership or membership is expired. Valid membership exists |
| TC-MEMBERSHIP-006 | Verify membership registration is disabled when user has active membership | 1. Navigate to profile page<br>2. Click on "Hội viên" tab<br>3. Wait for data to load<br>4. Verify user has an active membership (not expired)<br>5. Verify all "Đăng ký ngay" buttons in membership cards show "Đã có gói" text<br>6. Verify buttons are disabled (not clickable)<br>7. Attempt to click a disabled button | All "Đăng ký ngay" buttons are disabled and show "Đã có gói" text. Buttons are not clickable. No confirmation modal appears when clicking disabled buttons. User cannot register for new membership while having active one. | User is logged in. User has an active membership that has not expired |
| TC-MEMBERSHIP-007 | Verify QR payment drawer opens after successful membership registration | 1. Navigate to profile page<br>2. Click on "Hội viên" tab<br>3. Wait for memberships to load<br>4. Register for a membership (follow TC-MEMBERSHIP-005 steps 4-7)<br>5. After successful registration, verify QR Payment Drawer opens automatically<br>6. Verify drawer displays: QR code image, payment ID, payment amount (formatted), expiry date/time<br>7. Verify countdown banner is displayed (if applicable)<br>8. Close the drawer | QR Payment Drawer opens automatically after successful registration (if payment method is Bank and qrUrl exists). Drawer title is "Thanh toán gói hội viên". QR code is displayed correctly. Payment information is shown with correct formatting. Countdown banner shows remaining time if expiry date exists. Drawer can be closed successfully. | User is logged in. User has no active membership. Membership registration returns qrUrl and paymentMethod is "Bank" |
| TC-MEMBERSHIP-008 | Verify expired membership alert is displayed | 1. Navigate to profile page<br>2. Click on "Hội viên" tab<br>3. Wait for data to load<br>4. Verify user has a membership with endDate in the past<br>5. Verify expired alert is displayed in current membership card<br>6. Verify alert message: "Gói hội viên đã hết hạn"<br>7. Verify alert description: "Bạn có thể đăng ký gói hội viên mới bên dưới"<br>8. Verify "Đăng ký ngay" buttons are enabled in available memberships | Expired membership card shows warning alert. Alert has warning type styling with icon. Alert message and description are displayed correctly. Status badge shows "Đã hết hạn" with red color. Remaining days shows "Đã hết hạn" in red. "Đăng ký ngay" buttons are enabled, allowing user to register for new membership. | User is logged in. User has a membership that has expired (endDate is in the past) |
| TC-MEMBERSHIP-009 | Verify loading state during membership registration | 1. Navigate to profile page<br>2. Click on "Hội viên" tab<br>3. Wait for memberships to load<br>4. Click "Đăng ký ngay" button on a membership card<br>5. Click "Đăng ký" in confirmation modal<br>6. Observe button state immediately after click<br>7. Verify loading state during API call | "Đăng ký ngay" button shows loading spinner and "Đang xử lý..." text during registration. Button is disabled during submission. All membership card buttons show loading state. Loading state disappears after API response (success or error). | User is logged in. User has no active membership. Network connection is available |
| TC-MEMBERSHIP-010 | Verify error handling when membership registration fails | 1. Navigate to profile page<br>2. Click on "Hội viên" tab<br>3. Wait for memberships to load<br>4. Click "Đăng ký ngay" button on a membership card<br>5. Click "Đăng ký" in confirmation modal<br>6. Wait for API response (simulate error condition)<br>7. Verify error message is displayed | Error message from API is displayed (e.g., "Đăng ký gói hội viên thất bại!" or specific error message). Error message is shown via message.error. User remains on membership page. Registration modal is closed. User can attempt registration again. | User is logged in. User has no active membership. API returns error response (network error, validation error, etc.) |

