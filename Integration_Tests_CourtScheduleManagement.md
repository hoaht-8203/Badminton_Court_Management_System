# Integration Test Cases - Court Schedule Management Module

## 1. View and Filter Schedule (13 test cases)

| Test Case ID         | Test Case Description                                          | Test Case Procedure                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | Expected Results                                                                                                                                                                                                           | Pre-conditions                             |
| -------------------- | -------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------ |
| TC-SCHEDULE-VIEW-001 | Verify Court Schedule page UI elements are displayed correctly | 1. Navigate to court schedule page (/quanlysancaulong/(private)/court-schedule)<br>2. Verify calendar picker is displayed on the left<br>3. Verify schedule view is displayed on the right<br>4. Verify status filter checkboxes are displayed: "Đã đặt & thanh toán", "Đã đặt - chưa thanh toán", "Đã check-in", "Hoàn tất", "Đã hủy", "No-show"<br>5. Verify view toggle (Segmented) is displayed: "Xem theo lịch" and "Xem theo danh sách"<br>6. Verify schedule shows courts grouped by court area<br>7. Verify time headers show day and hour<br>8. Verify statistics are displayed at bottom | All UI elements are displayed correctly. Calendar picker is visible. Schedule view shows courts grouped by areas. Status filters are visible. View toggle is functional. Statistics section is displayed.                  | User is logged in with admin/staff role    |
| TC-SCHEDULE-VIEW-002 | Verify schedule displays booking events correctly              | 1. Navigate to court schedule page<br>2. Wait for schedule to load<br>3. Verify booking events are displayed on schedule<br>4. Verify each event shows: status badge, customer name, time range (HH:mm - HH:mm)<br>5. Verify event colors match status: green (Active), yellow (PendingPayment), blue (Completed/CheckedIn), red (Cancelled), orange (NoShow)<br>6. Verify events are positioned correctly on timeline<br>7. Verify events are assigned to correct court rows                                                                                                                      | Schedule loads successfully. Booking events are displayed with correct information. Event colors match their status. Events are positioned correctly on timeline. Events are assigned to correct courts.                   | User is logged in. Booking data exists     |
| TC-SCHEDULE-VIEW-003 | Verify court area expand/collapse functionality                | 1. Navigate to court schedule page<br>2. Wait for schedule to load<br>3. Verify court areas are displayed as parent rows<br>4. Verify courts are displayed as child rows under their areas<br>5. Click expand/collapse icon on a court area row header<br>6. Verify child courts expand or collapse<br>7. Verify expand/collapse icons change appropriately<br>8. Click "expand all" icon if available<br>9. Verify all courts expand                                                                                                                                                              | Court areas are displayed correctly. Expand/collapse functionality works. Icons change appropriately. Expand all/collapse all works correctly.                                                                             | User is logged in. Courts with areas exist |
| TC-SCHEDULE-VIEW-004 | Verify schedule statistics display correctly                   | 1. Navigate to court schedule page<br>2. Wait for schedule to load<br>3. Select a date with bookings<br>4. Verify statistics are displayed: "Đã đặt & thanh toán: X", "Đã đặt - chưa thanh toán: X", "Hoàn tất: X", "Đã đặt - không đến: X", "Đã hủy: X"<br>5. Verify "Lượt khách sắp tới (≤ 1 giờ): X lượt" is displayed<br>6. Verify "Đã đến nhưng chưa check-in: X lượt" is displayed<br>7. Verify counts match actual bookings on selected date                                                                                                                                                | Statistics are displayed correctly. Counts match actual bookings. Upcoming customers count shows bookings starting within 1 hour. Arrived not checked-in count shows active bookings that have started but not checked in. | User is logged in. Booking data exists     |
| TC-SCHEDULE-VIEW-005 | Verify view toggle between schedule and list                   | 1. Navigate to court schedule page<br>2. Verify default view is "schedule"<br>3. Click "Xem theo danh sách" option<br>4. Verify view switches to list/table view<br>5. Verify list view displays bookings in table format<br>6. Click "Xem theo lịch" option<br>7. Verify view switches back to schedule view<br>8. Verify schedule view is displayed correctly                                                                                                                                                                                                                                    | View toggle works correctly. Schedule view displays calendar with events. List view displays bookings in table format. Switching between views maintains selected date and filters.                                        | User is logged in. Network available       |
| TC-SCHEDULE-VIEW-006 | Verify status filter checkboxes are displayed correctly        | 1. Navigate to court schedule page<br>2. Verify status filter section is displayed<br>3. Verify all checkboxes are visible: "Đã đặt & thanh toán", "Đã đặt - chưa thanh toán", "Đã check-in", "Hoàn tất", "Đã hủy", "No-show"<br>4. Verify all checkboxes are checked by default<br>5. Verify filter section is positioned correctly                                                                                                                                                                                                                                                               | Status filter checkboxes are displayed correctly. All checkboxes are visible and checked by default. Filter section is positioned correctly.                                                                               | User is logged in with admin/staff role    |
| TC-SCHEDULE-VIEW-007 | Verify filtering by single status                              | 1. Navigate to court schedule page<br>2. Wait for schedule to load<br>3. Uncheck all status filters<br>4. Check only "Đã đặt & thanh toán"<br>5. Verify schedule updates to show only Active bookings<br>6. Verify event colors are green<br>7. Verify statistics update to show only Active count<br>8. Uncheck "Đã đặt & thanh toán"<br>9. Check only "Đã hủy"<br>10. Verify schedule shows only Cancelled bookings                                                                                                                                                                              | Filtering by single status works correctly. Schedule updates immediately. Only bookings with selected status are displayed. Statistics update accordingly.                                                                 | User is logged in.                         |
| TC-SCHEDULE-VIEW-008 | Verify filtering by multiple statuses                          | 1. Navigate to court schedule page<br>2. Wait for schedule to load<br>3. Uncheck all status filters<br>4. Check "Đã đặt & thanh toán" and "Đã đặt - chưa thanh toán"<br>5. Verify schedule shows both Active and PendingPayment bookings<br>6. Verify event colors match their statuses<br>7. Verify statistics show combined counts<br>8. Check additional statuses<br>9. Verify schedule updates to include all selected statuses                                                                                                                                                                | Filtering by multiple statuses works correctly. Schedule shows bookings matching any selected status. Event colors are correct. Statistics reflect combined counts.                                                        | User is logged in                          |
| TC-SCHEDULE-VIEW-009 | Verify filtering removes events when status is unchecked       | 1. Navigate to court schedule page<br>2. Wait for schedule to load<br>3. Note the number of events displayed<br>4. Uncheck "Đã hủy" status filter<br>5. Verify Cancelled events disappear from schedule<br>6. Verify statistics update (totalCancelled becomes 0)<br>7. Re-check "Đã hủy" status filter<br>8. Verify Cancelled events reappear                                                                                                                                                                                                                                                     | Unchecking status filter removes events from schedule. Statistics update immediately. Re-checking filter restores events.                                                                                                  | User is logged in                          |
| TC-SCHEDULE-VIEW-010 | Verify filtering works with date selection                     | 1. Navigate to court schedule page<br>2. Select a specific date<br>3. Note bookings displayed for that date<br>4. Uncheck some status filters<br>5. Verify filtered bookings disappear<br>6. Select a different date<br>7. Verify filters are still applied<br>8. Verify only bookings matching filters are displayed for new date                                                                                                                                                                                                                                                                 | Filters persist when changing dates. Filtering works correctly for each selected date. Schedule updates appropriately when date changes.                                                                                   | User is logged in                          |
| TC-SCHEDULE-VIEW-011 | Verify calendar picker displays and allows date selection      | 1. Navigate to court schedule page<br>2. Verify calendar picker is displayed on the left<br>3. Verify current date is selected by default<br>4. Click on a different date in calendar<br>5. Verify selected date is highlighted<br>6. Verify schedule updates to show bookings for selected date<br>7. Verify date header in schedule shows selected date                                                                                                                                                                                                                                          | Calendar picker is displayed correctly. Current date is selected by default. Clicking a date selects it and updates schedule. Schedule shows bookings for selected date.                                                   | User is logged in                          |
| TC-SCHEDULE-VIEW-012 | Verify "Ngày hôm nay" button functionality                     | 1. Navigate to court schedule page<br>2. Select a different date (not today)<br>3. Verify schedule shows bookings for selected date<br>4. Click "Ngày hôm nay" button<br>5. Verify calendar jumps to today's date<br>6. Verify today's date is selected<br>7. Verify schedule updates to show today's bookings<br>8. Verify button text shows current date                                                                                                                                                                                                                                         | "Ngày hôm nay" button works correctly. Clicking button selects today's date. Schedule updates to show today's bookings. Button text displays current date correctly.                                                       | User is logged in                          |
| TC-SCHEDULE-VIEW-013 | Verify calendar month/year navigation                          | 1. Navigate to court schedule page<br>2. Click on month/year selector in calendar header<br>3. Verify month/year dropdown appears<br>4. Select a different month<br>5. Verify calendar updates to show selected month<br>6. Select a different year<br>7. Verify calendar updates to show selected year<br>8. Select a date in the new month/year<br>9. Verify schedule updates accordingly                                                                                                                                                                                                        | Month/year navigation works correctly. Calendar updates when month/year changes. Date selection works in any month/year. Schedule updates when date is selected.                                                           | User is logged in                          |

## 2. Create New Booking (5 test cases)

| Test Case ID           | Test Case Description                                         | Test Case Procedure                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Expected Results                                                                                                                                                                       | Pre-conditions                                             |
| ---------------------- | ------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------- |
| TC-SCHEDULE-CREATE-001 | Verify create booking modal opens when time range is selected | 1. Navigate to court schedule page<br>2. Wait for schedule to load<br>3. Click and drag on a time range in schedule (select start and end time)<br>4. Verify Create Booking Modal opens<br>5. Verify modal title is displayed<br>6. Verify form fields are visible: customer, court, start date, start time, end time, booking type, payment method<br>7. Verify selected time range is pre-filled in form<br>8. Verify selected court is pre-filled                                                                                                                             | Modal opens when time range is selected. Form fields are visible. Selected time range and court are pre-filled. User can proceed to fill other required fields.                        | User is logged in. Membership is selected                  |
| TC-SCHEDULE-CREATE-002 | Verify successful booking creation (one-time booking)         | 1. Select a time range on schedule<br>2. Verify Create Booking Modal opens<br>3. Select "Đặt lịch vãng lai" option<br>4. Select a customer from dropdown<br>5. Verify court is pre-filled<br>6. Verify start date, start time, end time are pre-filled<br>7. Select payment method (Bank or Cash)<br>8. Fill optional fields (note, voucher if applicable)<br>9. Click submit button<br>10. Wait for API response<br>11. Verify success message<br>12. Verify modal closes<br>13. Verify new booking appears on schedule<br>14. Verify QR drawer opens if payment method is Bank | Booking created successfully. Success message is displayed. Modal closes. New booking appears on schedule with correct time and court. QR drawer opens for Bank payment.               | User is logged in. Customer exists. Payment method is Bank |
| TC-SCHEDULE-CREATE-003 | Verify successful recurring booking creation                  | 1. Select a time range on schedule<br>2. Verify Create Booking Modal opens<br>3. Select "Đặt lịch cố định" option<br>4. Select a customer<br>5. Select date range (start and end dates)<br>6. Select days of week (e.g., T2, T4, T6)<br>7. Verify total sessions count is calculated correctly<br>8. Select payment method<br>9. Fill other required fields<br>10. Click submit button<br>11. Wait for API response<br>12. Verify success message<br>13. Verify multiple booking occurrences appear on schedule for selected days                                                | Recurring booking created successfully. Total sessions count is calculated correctly. Multiple booking occurrences appear on schedule for selected days. Success message is displayed. | User is logged in. Customer exists. Payment method is Cash |
| TC-SCHEDULE-CREATE-004 | Verify validation errors when required fields are missing     | 1. Select a time range on schedule<br>2. Verify Create Booking Modal opens<br>3. Leave customer field empty<br>4. Click submit button<br>5. Verify validation error for customer field<br>6. Select customer, clear start time<br>7. Click submit button<br>8. Verify validation error for start time<br>9. Fill required fields with invalid data<br>10. Verify appropriate validation errors                                                                                                                                                                                   | Validation errors are displayed for empty or invalid required fields. Submission is blocked. User can correct errors and resubmit.                                                     | User is logged in. Membership selected                     |
| TC-SCHEDULE-CREATE-005 | Verify warning when booking time is in the past               | 1. Navigate to court schedule page<br>2. Select a past date<br>3. Select a time range that has already passed<br>4. Verify warning message "Lưu ý: Bạn đang đặt sân trong quá khứ" is displayed<br>5. Verify modal still opens<br>6. Verify user can still proceed with booking creation                                                                                                                                                                                                                                                                                         | Warning message is displayed for past time selections. Modal still opens. User can proceed with booking creation despite warning.                                                      | User is logged in. Past date selected                      |

## 3. View Booking Details (6 test cases)

| Test Case ID           | Test Case Description                                    | Test Case Procedure                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | Expected Results                                                                                                                                                                                                     | Pre-conditions                                                                   |
| ---------------------- | -------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------- |
| TC-SCHEDULE-DETAIL-001 | Verify booking detail drawer opens when event is clicked | 1. Navigate to court schedule page<br>2. Wait for schedule to load<br>3. Click on a booking event on schedule<br>4. Verify Booking Occurrence Detail Drawer opens<br>5. Verify drawer displays booking information: customer name, court name, date/time, status, payment information<br>6. Verify status is displayed with color tag<br>7. Verify action buttons are visible based on status                                                                                                                                                                            | Drawer opens when event is clicked. Booking information is displayed correctly. Status is shown with appropriate color. Action buttons are visible based on status.                                                  | User is logged in. Booking exists. User memberships exist for the membership     |
| TC-SCHEDULE-DETAIL-002 | Verify booking detail information displays correctly     | 1. Click on a booking event<br>2. Wait for detail drawer to load<br>3. Verify customer information is displayed: name, phone, email<br>4. Verify court information is displayed: court name, court area<br>5. Verify booking time is displayed: start date/time, end date/time<br>6. Verify status is displayed with correct color tag<br>7. Verify payment information is displayed (if applicable)<br>8. Verify note is displayed (if exists)                                                                                                                          | Booking detail information is displayed correctly. All fields are populated with correct data. Status color matches booking status. Payment information is accurate.                                                 | User is logged in. Booking selected. User memberships exist                      |
| TC-SCHEDULE-DETAIL-003 | Verify check-in functionality                            | 1. Click on a booking event with status "Active"<br>2. Verify "Check-in" button is visible<br>3. Click "Check-in" button<br>4. Verify confirmation modal appears<br>5. Enter note (optional)<br>6. Click "Check-in" in confirmation modal<br>7. Wait for API response<br>8. Verify success message<br>9. Verify booking status changes to "CheckedIn"<br>10. Verify event color changes to blue on schedule                                                                                                                                                              | Check-in functionality works correctly. Confirmation modal appears. Booking status updates to CheckedIn. Event color updates on schedule. Success message is displayed.                                              | User is logged in. Membership selected. User membership exists                   |
| TC-SCHEDULE-DETAIL-004 | Verify "Xem QR" button for pending payment bookings      | 1. Click on a booking event with status "PendingPayment"<br>2. Verify "Xem QR" button is visible<br>3. Click "Xem QR" button<br>4. Verify QR Payment Drawer opens<br>5. Verify QR code is displayed<br>6. Verify payment information is displayed: payment ID, amount, expiry time<br>7. Verify countdown banner is displayed (if applicable)<br>8. Close QR drawer<br>9. Verify drawer closes                                                                                                                                                                           | "Xem QR" button is visible for pending payment bookings. QR drawer opens correctly. QR code and payment information are displayed. Countdown banner shows remaining time.                                            | User is logged in. Booking selected. User membership exists                      |
| TC-SCHEDULE-DETAIL-005 | Verify "No-show" functionality                           | 1. Click on a booking event that has passed its start time<br>2. Verify "No-show" button is visible (if applicable)<br>3. Click "No-show" button<br>4. Verify confirmation modal appears<br>5. Enter note (optional)<br>6. Confirm no-show<br>7. Wait for API response<br>8. Verify success message<br>9. Verify booking status changes to "NoShow"<br>10. Verify event color changes to orange on schedule                                                                                                                                                              | No-show functionality works correctly. Confirmation modal appears. Booking status updates to NoShow. Event color updates on schedule. Success message is displayed.                                                  | User is logged in. Booking selected. Network available                           |
| TC-SCHEDULE-DETAIL-006 | Verify payment history tab displays correctly            | 1. Click on a booking event<br>2. Wait for detail drawer to load<br>3. Verify two tabs are displayed: "Thông tin cơ bản" and "Lịch sử thanh toán"<br>4. Click on "Lịch sử thanh toán" tab<br>5. Verify payment history section is displayed<br>6. If payments exist, verify each payment shows: payment ID, booking ID, amount (formatted with VN locale), payment status (with color tag), customer name, customer ID, customer phone, customer email, court name, payment date/time, note<br>7. If no payments exist, verify "Chưa có thanh toán" message is displayed | Payment history tab is displayed correctly. Tab switching works. Payment information is displayed with correct formatting. Payment status tags have appropriate colors. Empty state is shown when no payments exist. | User is logged in. Booking selected. Booking may or may not have payment history |

## 4. Real-time Updates (3 test cases)

| Test Case ID             | Test Case Description                                             | Test Case Procedure                                                                                                                                                                                                                                                                                                                                                                                            | Expected Results                                                                                                                                                               | Pre-conditions                                            |
| ------------------------ | ----------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | --------------------------------------------------------- |
| TC-SCHEDULE-REALTIME-001 | Verify SignalR connection indicator displays correctly            | 1. Navigate to court schedule page<br>2. Wait for page to load<br>3. Verify realtime connection indicator dot is displayed in schedule corner<br>4. Verify dot color: gray (checking), green (connected), red (disconnected)<br>5. Verify tooltip shows connection status<br>6. Verify warning alert is displayed if connection fails                                                                          | Connection indicator dot is displayed. Dot color reflects connection status correctly. Tooltip shows appropriate status message. Warning alert appears if connection fails.    | User is logged in. Membership exists with status Active   |
| TC-SCHEDULE-REALTIME-002 | Verify schedule updates automatically when booking is created     | 1. Navigate to court schedule page<br>2. Wait for SignalR connection to establish<br>3. Verify connection indicator shows green<br>4. Create a new booking (or have another user create one)<br>5. Verify schedule automatically updates to show new booking<br>6. Verify no page refresh is required<br>7. Verify new booking appears with correct information                                                | Schedule updates automatically when booking is created. No page refresh required. New booking appears immediately. Booking information is correct.                             | User is logged in. Membership exists with status Inactive |
| TC-SCHEDULE-REALTIME-003 | Verify schedule updates automatically when booking status changes | 1. Navigate to court schedule page<br>2. Wait for SignalR connection<br>3. Note a booking event on schedule<br>4. Update booking status (e.g., check-in, cancel) from detail drawer or another session<br>5. Verify schedule automatically updates<br>6. Verify event color changes to match new status<br>7. Verify statistics update automatically<br>8. Verify notification message appears (if applicable) | Schedule updates automatically when booking status changes. Event color updates immediately. Statistics update automatically. Notification message appears for status changes. | User is logged in. Membership exists                      |
