# Integration Test Cases - Service Management Module

## 1. View and Filter Services (8 test cases)

| Test Case ID | Test Case Description | Test Case Procedure | Expected Results | Pre-conditions |
|--------------|----------------------|---------------------|------------------|----------------|
| TC-SERVICE-VIEW-001 | Verify Service Management page UI elements are displayed correctly | 1. Navigate to service management page (/quanlysancaulong/(private)/services)<br>2. Verify breadcrumb shows "Quản trị ứng dụng > Quản lý dịch vụ"<br>3. Verify "Lọc dữ liệu" search card is displayed<br>4. Verify table with columns: Mã dịch vụ, Tên dịch vụ, Mô tả, Danh mục, Giá/giờ, Số lượng, Đơn vị, Trạng thái, Ngày sửa đổi lần cuối, Người sửa đổi lần cuối<br>5. Verify "Tổng số dịch vụ" counter is displayed<br>6. Verify action buttons: "Thêm dịch vụ", "Tải lại" | All UI elements are displayed correctly. Search form is visible with filter fields. Table structure is shown with all required columns. Action buttons are visible and properly styled. Total service count is displayed. | User is logged in with admin/staff role |
| TC-SERVICE-VIEW-002 | Verify service list is loaded and displayed correctly | 1. Navigate to service management page<br>2. Wait for service list to load<br>3. Verify table displays all services<br>4. Verify each row shows: service code, service name with avatar/image, description (or "-"), category (Thiết bị/Trọng tài/Quần áo/Khác), price per hour (formatted with VN locale or "-"), stock quantity (or 0), unit (or "-"), status with color coding, updated date/time, updated by user<br>5. Verify status colors: green for "Đang hoạt động", red for "Không hoạt động" | Service list is loaded successfully. All service records are displayed in the table. Data is formatted correctly (dates, prices, status colors). Status text matches status value. Avatar/image is displayed for each service. No loading spinner is shown after data loads. | User is logged in. Service data exists in the system |
| TC-SERVICE-VIEW-003 | Verify search service by name functionality | 1. Navigate to service management page<br>2. Wait for service list to load<br>3. Enter partial service name in "Tìm kiếm theo tên dịch vụ" field<br>4. Click "Tìm kiếm" button<br>5. Verify table displays only services matching the name<br>6. Verify total count is updated<br>7. Click "Reset" button<br>8. Verify all services are displayed again | Search by name filters results correctly. Table updates to show only matching services. Total count reflects filtered results. "Reset" button clears filter and shows all services. | User is logged in. Service data exists with various names |
| TC-SERVICE-VIEW-004 | Verify search service by category functionality | 1. Navigate to service management page<br>2. Wait for service list to load<br>3. Select a category from "Tìm kiếm theo danh mục" dropdown (e.g., "Thiết bị")<br>4. Click "Tìm kiếm" button<br>5. Verify table displays only services in selected category<br>6. Verify category column shows correct category for all displayed rows<br>7. Clear category selection<br>8. Click "Tìm kiếm" button<br>9. Verify all services are displayed | Search by category filters results correctly. Dropdown shows all available categories (Thiết bị, Trọng tài, Quần áo, Khác). Table updates to show only services in selected category. All displayed rows have matching category. Clearing selection shows all services. | User is logged in. Service data exists with different categories |
| TC-SERVICE-VIEW-005 | Verify search service by status functionality | 1. Navigate to service management page<br>2. Wait for service list to load<br>3. Select a status from "Tìm kiếm theo trạng thái" dropdown (e.g., "Hoạt động")<br>4. Click "Tìm kiếm" button<br>5. Verify table displays only services with selected status<br>6. Verify status column shows correct status for all displayed rows<br>7. Select "Tất cả" option<br>8. Click "Tìm kiếm" button<br>9. Verify all services are displayed | Search by status filters results correctly. Dropdown shows all available statuses. Table updates to show only services with selected status. All displayed rows have matching status. Selecting "Tất cả" shows all services. | User is logged in. Service data exists with different statuses |
| TC-SERVICE-VIEW-006 | Verify combined search with multiple filters | 1. Navigate to service management page<br>2. Wait for service list to load<br>3. Enter service name in "Tìm kiếm theo tên dịch vụ" field<br>4. Select category from "Tìm kiếm theo danh mục" dropdown<br>5. Select status from "Tìm kiếm theo trạng thái" dropdown<br>6. Click "Tìm kiếm" button<br>7. Verify table displays services matching all criteria<br>8. Verify total count reflects combined filter results<br>9. Click "Reset" button<br>10. Verify all filters are cleared | Combined search filters work correctly. All filters are applied simultaneously. Results match all specified criteria. Total count reflects combined filter results. "Reset" button clears all filters at once. | User is logged in. Service data exists with various combinations |
| TC-SERVICE-VIEW-007 | Verify expandable row functionality to view service details | 1. Navigate to service management page<br>2. Wait for service list to load<br>3. Click on a service row to expand<br>4. Verify expanded content displays: service code, service name, description (or "-"), price per hour (formatted or "-"), category (translated), unit (or "-"), stock quantity (or 0), status with color coding, note (or "-")<br>5. Verify action buttons: "Cập nhật dịch vụ", status change buttons<br>6. Click row again to collapse | Row expands successfully when clicked. Expanded content shows all service details correctly. Status is displayed with appropriate color (green for Active, red for Inactive). Action buttons are visible. Row can be collapsed by clicking again. | User is logged in. Service data exists |
| TC-SERVICE-VIEW-008 | Verify reload data functionality and total count display | 1. Navigate to service management page<br>2. Wait for initial data to load<br>3. Note the total service count displayed<br>4. Click "Tải lại" button<br>5. Observe loading state<br>6. Wait for data to reload<br>7. Verify table data is refreshed<br>8. Verify total count "Tổng số dịch vụ: X" is updated correctly | Reload button is clickable. Button triggers data refresh. Table shows loading state during refresh. Data is refreshed from server. Total count is updated correctly based on current data. All service records are displayed correctly after reload. | User is logged in. Network connection is available |

## 2. Create Service (8 test cases)

| Test Case ID | Test Case Description | Test Case Procedure | Expected Results | Pre-conditions |
|--------------|----------------------|---------------------|------------------|----------------|
| TC-SERVICE-CREATE-001 | Verify Create Service Drawer opens and displays correctly | 1. Navigate to service management page<br>2. Click "Thêm dịch vụ" button<br>3. Verify Create Service Drawer opens<br>4. Verify drawer title is displayed<br>5. Verify form fields are visible: Mã dịch vụ (optional), Danh mục, Tên dịch vụ, Đơn vị, Số lượng, Giá/giờ (VND), Mô tả (optional), Ghi chú (optional), Ảnh dịch vụ (optional)<br>6. Verify "Tạo dịch vụ" and "Hủy" buttons are visible | Create Service Drawer opens successfully. Drawer displays with correct title. All form fields are visible and properly styled. Action buttons are displayed. Form layout is correct. | User is logged in with admin/staff role |
| TC-SERVICE-CREATE-002 | Verify successful service creation with all required information | 1. Navigate to service management page<br>2. Click "Thêm dịch vụ" button<br>3. Select category from "Danh mục" dropdown<br>4. Fill in "Tên dịch vụ" field<br>5. Fill in "Đơn vị" field<br>6. Enter "Số lượng" (number >= 0)<br>7. Enter "Giá/giờ (VND)" (number >= 0)<br>8. Fill in "Mô tả" (optional)<br>9. Fill in "Ghi chú" (optional)<br>10. Click "Tạo dịch vụ" button<br>11. Wait for API response | Service is created successfully. All required fields are filled correctly. Success message is displayed. Drawer closes automatically. Table refreshes to show new service. New service appears in the list with correct information. | User is logged in with admin/staff role |
| TC-SERVICE-CREATE-003 | Verify service creation with image upload | 1. Navigate to service management page<br>2. Click "Thêm dịch vụ" button<br>3. Fill in all required fields<br>4. Click "Chọn ảnh dịch vụ" button<br>5. Select an image file (JPG, PNG, GIF, WebP)<br>6. Wait for image upload to complete<br>7. Verify uploaded image is displayed in preview<br>8. Verify "Xóa ảnh" button appears<br>9. Click "Tạo dịch vụ" button<br>10. Wait for API response | Image upload works correctly. Image is uploaded successfully. Image preview is displayed (200x200). Upload progress is shown during upload. Service is created with image URL. Success message is displayed. Image is shown in service list. | User is logged in with admin/staff role. Valid image file is available |
| TC-SERVICE-CREATE-004 | Verify validation errors when required fields are empty | 1. Navigate to service management page<br>2. Click "Thêm dịch vụ" button<br>3. Leave all required fields empty<br>4. Click "Tạo dịch vụ" button<br>5. Verify validation errors are displayed for: Danh mục, Tên dịch vụ, Đơn vị, Số lượng, Giá/giờ<br>6. Fill in some fields, leave others empty<br>7. Verify specific error messages appear | Form validation prevents submission. Error messages are displayed for empty required fields: "Danh mục là bắt buộc", "Tên dịch vụ là bắt buộc", "Đơn vị là bắt buộc", "Số lượng là bắt buộc", "Giá/giờ là bắt buộc". Submit button does not trigger API call until all required fields are filled. | User is logged in |
| TC-SERVICE-CREATE-005 | Verify validation error when service name is too short or too long | 1. Navigate to service management page<br>2. Click "Thêm dịch vụ" button<br>3. Fill in other required fields<br>4. Enter service name with less than 2 characters<br>5. Click "Tạo dịch vụ" button<br>6. Verify validation error<br>7. Enter service name with more than 100 characters<br>8. Click "Tạo dịch vụ" button<br>9. Verify validation error | Validation prevents submission. Error message "Tên dịch vụ phải có ít nhất 2 ký tự" is displayed for short names. Error message "Tên dịch vụ không được quá 100 ký tự" is displayed for long names. Submit button does not trigger API call. | User is logged in |
| TC-SERVICE-CREATE-006 | Verify validation error when stock quantity or price is negative | 1. Navigate to service management page<br>2. Click "Thêm dịch vụ" button<br>3. Fill in required fields<br>4. Enter negative number in "Số lượng" field<br>5. Click "Tạo dịch vụ" button<br>6. Verify validation error<br>7. Enter negative number in "Giá/giờ (VND)" field<br>8. Click "Tạo dịch vụ" button<br>9. Verify validation error | Validation prevents submission. Error message "Số lượng phải lớn hơn hoặc bằng 0" is displayed for negative stock quantity. Error message "Giá/giờ phải lớn hơn hoặc bằng 0" is displayed for negative price. Submit button does not trigger API call. | User is logged in |
| TC-SERVICE-CREATE-007 | Verify automatic service code generation when code field is empty | 1. Navigate to service management page<br>2. Click "Thêm dịch vụ" button<br>3. Leave "Mã dịch vụ" field empty (placeholder shows "Để trống để tự động tạo mã (VD: DV000001)")<br>4. Fill in all required fields<br>5. Click "Tạo dịch vụ" button<br>6. Wait for API response<br>7. Verify service is created with auto-generated code<br>8. Verify code follows format (e.g., DV000001) | Service code is auto-generated when field is left empty. Service is created successfully with generated code. Code format is correct. Generated code appears in service list. Success message is displayed. | User is logged in with admin/staff role |
| TC-SERVICE-CREATE-008 | Verify cancel service creation and drawer cleanup | 1. Navigate to service management page<br>2. Click "Thêm dịch vụ" button<br>3. Fill in service name, category, and other fields<br>4. Upload an image<br>5. Click "Hủy" button or close drawer<br>6. Verify drawer closes<br>7. Verify form is reset<br>8. Verify uploaded image is deleted<br>9. Open drawer again<br>10. Verify form is empty | Drawer closes successfully. All form fields are reset. Uploaded image is deleted from server. Form state is cleared. Opening drawer again shows empty form. No data persists after cancellation. | User is logged in with admin/staff role |

## 3. Update Service (8 test cases)

| Test Case ID | Test Case Description | Test Case Procedure | Expected Results | Pre-conditions |
|--------------|----------------------|---------------------|------------------|----------------|
| TC-SERVICE-UPDATE-001 | Verify Update Service Drawer opens with pre-filled data | 1. Navigate to service management page<br>2. Wait for service list to load<br>3. Expand a service row<br>4. Click "Cập nhật dịch vụ" button<br>5. Verify Update Service Drawer opens<br>6. Verify drawer title is displayed<br>7. Verify form fields are pre-filled with current service data: code, name, category, description, price per hour, unit, stock quantity, note<br>8. Verify service image is displayed if available | Update Service Drawer opens successfully. Drawer displays with correct title. All form fields are pre-filled with current service information. Image is displayed if available. Form is ready for editing. | User is logged in. Service data exists |
| TC-SERVICE-UPDATE-002 | Verify successful service update with modified information | 1. Navigate to service management page<br>2. Expand a service row<br>3. Click "Cập nhật dịch vụ" button<br>4. Modify service name<br>5. Change category<br>6. Update price per hour<br>7. Update stock quantity<br>8. Update description and note<br>9. Click "Lưu thay đổi" button<br>10. Wait for API response<br>11. Verify table refreshes with updated data | Service is updated successfully. Modified fields are saved correctly. Success message "Cập nhật dịch vụ thành công!" is displayed. Drawer closes automatically. Table refreshes to show updated information. Updated data is displayed correctly in table and expanded row. | User is logged in. Service data exists |
| TC-SERVICE-UPDATE-003 | Verify updating service image | 1. Navigate to service management page<br>2. Expand a service row with existing image<br>3. Click "Cập nhật dịch vụ" button<br>4. Verify current image is displayed<br>5. Click "Xóa ảnh" button<br>6. Verify image is removed<br>7. Click "Chọn ảnh dịch vụ" button<br>8. Select new image file<br>9. Wait for upload to complete<br>10. Verify new image preview is displayed<br>11. Click "Lưu thay đổi" button<br>12. Verify image is updated | Current image is displayed correctly. Image can be removed. New image upload works. Image preview shows new image. Old image is replaced. Service is updated with new image URL. Success message is displayed. Updated image is shown in service list and expanded row. | User is logged in. Service exists with image. Valid image file is available |
| TC-SERVICE-UPDATE-004 | Verify validation errors when updating with invalid data | 1. Navigate to service management page<br>2. Expand a service row<br>3. Click "Cập nhật dịch vụ" button<br>4. Clear "Mã dịch vụ" field<br>5. Enter service name with less than 2 characters<br>6. Enter negative stock quantity<br>7. Enter negative price<br>8. Click "Lưu thay đổi" button<br>9. Verify validation errors are displayed | Form validation prevents submission. Error messages are displayed: "Mã dịch vụ là bắt buộc", "Tên dịch vụ phải có ít nhất 2 ký tự", "Số lượng phải lớn hơn hoặc bằng 0", "Giá/giờ phải lớn hơn hoặc bằng 0". Submit button does not trigger API call. User can correct errors and resubmit. | User is logged in. Service data exists |
| TC-SERVICE-UPDATE-005 | Verify updating service code | 1. Navigate to service management page<br>2. Expand a service row<br>3. Click "Cập nhật dịch vụ" button<br>4. Verify current service code is displayed<br>5. Modify service code<br>6. Verify code validation (min 2, max 50 characters)<br>7. Click "Lưu thay đổi" button<br>8. Verify service code is updated | Service code can be updated. Code validation works correctly. Service is updated with new code. Success message is displayed. Updated code appears in service list. | User is logged in. Service data exists |
| TC-SERVICE-UPDATE-006 | Verify updating service category | 1. Navigate to service management page<br>2. Expand a service row<br>3. Click "Cập nhật dịch vụ" button<br>4. Verify current category is selected<br>5. Change category to different option<br>6. Click "Lưu thay đổi" button<br>7. Verify category is updated<br>8. Verify category is displayed correctly in table (translated) | Category can be changed. All category options are available (Thiết bị, Trọng tài, Quần áo, Khác). Service is updated with new category. Success message is displayed. Updated category is shown in table with correct translation. | User is logged in. Service data exists |
| TC-SERVICE-UPDATE-007 | Verify updating service stock quantity and price | 1. Navigate to service management page<br>2. Expand a service row<br>3. Click "Cập nhật dịch vụ" button<br>4. Verify current stock quantity and price are displayed<br>5. Update stock quantity to new value<br>6. Update price per hour to new value<br>7. Click "Lưu thay đổi" button<br>8. Verify both values are updated<br>9. Verify values are displayed correctly in table and expanded row | Stock quantity and price can be updated. Values are saved correctly. Service is updated successfully. Success message is displayed. Updated values are shown in table (formatted correctly) and expanded row. | User is logged in. Service data exists |
| TC-SERVICE-UPDATE-008 | Verify cancel update and data persistence | 1. Navigate to service management page<br>2. Expand a service row<br>3. Click "Cập nhật dịch vụ" button<br>4. Modify service name, category, price, and other fields<br>5. Upload new image<br>6. Click "Hủy" button or close drawer<br>7. Verify drawer closes<br>8. Verify changes are not saved<br>9. Expand service row again<br>10. Verify original data is still displayed | Drawer closes successfully. Changes are not saved. Original service data remains unchanged. Uploaded image is deleted if drawer is closed. Opening update drawer again shows original data. No modifications are persisted. | User is logged in. Service data exists |

## 4. Update Service Status (6 test cases)

| Test Case ID | Test Case Description | Test Case Procedure | Expected Results | Pre-conditions |
|--------------|----------------------|---------------------|------------------|----------------|
| TC-SERVICE-STATUS-001 | Verify change service status to Inactive | 1. Navigate to service management page<br>2. Wait for service list to load<br>3. Expand a service row with status "Active"<br>4. Verify "Ngừng hoạt động" button is visible<br>5. Click "Ngừng hoạt động" button<br>6. Verify confirmation modal appears with message "Bạn có chắc chắn muốn ngừng hoạt động dịch vụ này?"<br>7. Click "OK" in confirmation modal<br>8. Wait for API response<br>9. Verify service status changes to "Không hoạt động" (red color)<br>10. Verify "Ngừng hoạt động" button is hidden, "Kích hoạt" button appears | Confirmation modal appears correctly. Status is updated to "Inactive" successfully. Success message "Cập nhật trạng thái dịch vụ thành công!" is displayed. Status column shows "Không hoạt động" in red. Button visibility is updated correctly. Table refreshes to show new status. | User is logged in. Service exists with status Active |
| TC-SERVICE-STATUS-002 | Verify change service status to Active | 1. Navigate to service management page<br>2. Wait for service list to load<br>3. Expand a service row with status "Inactive"<br>4. Verify "Kích hoạt" button is visible<br>5. Click "Kích hoạt" button<br>6. Verify confirmation modal appears<br>7. Click "OK" in confirmation modal<br>8. Wait for API response<br>9. Verify service status changes to "Đang hoạt động" (green color)<br>10. Verify "Kích hoạt" button is hidden, "Ngừng hoạt động" button appears | Confirmation modal appears. Status is updated to "Active" successfully. Success message is displayed. Status column shows "Đang hoạt động" in green. Button visibility is updated correctly. Table refreshes to show new status. | User is logged in. Service exists with status Inactive |
| TC-SERVICE-STATUS-003 | Verify status change button visibility based on current status | 1. Navigate to service management page<br>2. Wait for service list to load<br>3. Expand a service row with status "Active"<br>4. Verify "Ngừng hoạt động" button is visible<br>5. Verify "Kích hoạt" button is hidden<br>6. Expand a service row with status "Inactive"<br>7. Verify "Kích hoạt" button is visible<br>8. Verify "Ngừng hoạt động" button is hidden | Button visibility is correct based on current status. Active services show "Ngừng hoạt động" button. Inactive services show "Kích hoạt" button. Appropriate buttons are hidden for each status. | User is logged in. Services exist with different statuses |
| TC-SERVICE-STATUS-004 | Verify cancel status change in confirmation modal | 1. Navigate to service management page<br>2. Wait for service list to load<br>3. Expand a service row<br>4. Click a status change button (e.g., "Ngừng hoạt động")<br>5. Verify confirmation modal appears<br>6. Click "Cancel" or close modal<br>7. Verify modal closes<br>8. Verify service status remains unchanged<br>9. Verify status in table is still the same | Confirmation modal can be cancelled. Modal closes without changes. Service status remains unchanged. No API call is made. Table shows original status. User can try again if needed. | User is logged in. Service exists |
| TC-SERVICE-STATUS-005 | Verify status change updates table immediately | 1. Navigate to service management page<br>2. Wait for service list to load<br>3. Note current status of a service in the table<br>4. Expand the service row<br>5. Click status change button<br>6. Confirm in modal<br>7. Wait for API response<br>8. Verify status column in table is updated immediately<br>9. Verify status color is updated<br>10. Verify expanded row status is also updated | Status change updates table immediately. Status column shows new status. Status color is updated correctly. Expanded row status is synchronized. No page refresh is needed. Changes are reflected in real-time. | User is logged in. Service exists |
| TC-SERVICE-STATUS-006 | Verify error handling when status change fails | 1. Navigate to service management page<br>2. Wait for service list to load<br>3. Expand a service row<br>4. Click a status change button<br>5. Confirm in modal<br>6. Simulate API error (network error or server error)<br>7. Verify error message is displayed<br>8. Verify service status remains unchanged<br>9. Verify status in table is still the original status | Error message from API is displayed. Service status remains unchanged. Table shows original status. User can retry the operation. Error handling works correctly. | User is logged in. Service exists. Network error or server error occurs |

