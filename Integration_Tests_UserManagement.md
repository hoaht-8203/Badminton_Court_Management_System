# Integration Test Cases - User Management Module

## 1. View and Filter Users (8 test cases)

| Test Case ID | Test Case Description | Test Case Procedure | Expected Results | Pre-conditions |
|--------------|----------------------|---------------------|------------------|----------------|
| TC-USER-VIEW-001 | Verify User Management page UI elements are displayed correctly | 1. Navigate to user management page (/quanlysancaulong/(private)/users)<br>2. Verify breadcrumb shows "Quản trị ứng dụng > Quản lý người dùng"<br>3. Verify "Lọc dữ liệu" search card is displayed<br>4. Verify table with columns: Họ và tên, Tên người dùng, Email, Số điện thoại, Trạng thái, Vai trò, Ngày sinh, Địa chỉ, Thành phố, Quận/Huyện, Phường/Xã, Ngày sửa đổi lần cuối, Người sửa đổi lần cuối<br>5. Verify "Tổng số người dùng" counter is displayed<br>6. Verify action buttons: "Thêm người dùng", "Tải lại" | All UI elements are displayed correctly. Search form is visible with filter fields. Table structure is shown with all required columns. Action buttons are visible and properly styled. Total user count is displayed. | User is logged in with admin/staff role |
| TC-USER-VIEW-002 | Verify user list is loaded and displayed correctly | 1. Navigate to user management page<br>2. Wait for user list to load<br>3. Verify table displays all users<br>4. Verify each row shows: full name, user name, email, phone number (or "-"), status with color coding (green for "Đang hoạt động", red for "Không hoạt động"), roles as tags, date of birth (or "-"), address fields (or "-"), updated date/time, updated by user<br>5. Verify status colors are displayed correctly | User list is loaded successfully. All user records are displayed in the table. Data is formatted correctly (dates, status colors). Status text matches status value. Role tags are displayed. No loading spinner is shown after data loads. | User is logged in. User data exists in the system |
| TC-USER-VIEW-003 | Verify search user by keyword functionality | 1. Navigate to user management page<br>2. Wait for user list to load<br>3. Enter partial keyword (user name, email, or full name) in "Tìm kiếm theo tên người dùng, email" field<br>4. Click "Tìm kiếm" button<br>5. Verify table displays only users matching the keyword<br>6. Verify total count is updated<br>7. Click "Reset" button<br>8. Verify all users are displayed again | Search by keyword filters results correctly. Table updates to show only matching users (by user name, email, or full name). Total count reflects filtered results. "Reset" button clears filter and shows all users. | User is logged in. User data exists with various names and emails |
| TC-USER-VIEW-004 | Verify search user by role functionality | 1. Navigate to user management page<br>2. Wait for user list to load<br>3. Select a role from "Vai trò" dropdown<br>4. Click "Tìm kiếm" button<br>5. Verify table displays only users with selected role<br>6. Verify role column shows correct role tags for all displayed rows<br>7. Clear role selection<br>8. Click "Tìm kiếm" button<br>9. Verify all users are displayed | Search by role filters results correctly. Dropdown shows all available roles. Table updates to show only users with selected role. All displayed rows have matching role. Clearing selection shows all users. | User is logged in. User data exists with different roles |
| TC-USER-VIEW-005 | Verify search user by status functionality | 1. Navigate to user management page<br>2. Wait for user list to load<br>3. Select a status from "Trạng thái" radio group (e.g., "Hoạt động" or "Không hoạt động")<br>4. Click "Tìm kiếm" button<br>5. Verify table displays only users with selected status<br>6. Verify status column shows correct status for all displayed rows<br>7. Select "Tất cả" option<br>8. Click "Tìm kiếm" button<br>9. Verify all users are displayed | Search by status filters results correctly. Radio group shows all available statuses (Tất cả, Hoạt động, Không hoạt động). Table updates to show only users with selected status. All displayed rows have matching status. Selecting "Tất cả" shows all users. | User is logged in. User data exists with different statuses |
| TC-USER-VIEW-006 | Verify combined search with multiple filters | 1. Navigate to user management page<br>2. Wait for user list to load<br>3. Enter keyword in "Tìm kiếm theo tên người dùng, email" field<br>4. Select role from "Vai trò" dropdown<br>5. Select status from "Trạng thái" radio group<br>6. Click "Tìm kiếm" button<br>7. Verify table displays users matching all criteria<br>8. Verify total count reflects combined filter results<br>9. Click "Reset" button<br>10. Verify all filters are cleared | Combined search filters work correctly. All filters are applied simultaneously. Results match all specified criteria. Total count reflects combined filter results. "Reset" button clears all filters at once. | User is logged in. User data exists with various combinations |
| TC-USER-VIEW-007 | Verify expandable row functionality to view user details | 1. Navigate to user management page<br>2. Wait for user list to load<br>3. Click on a user row to expand<br>4. Verify expanded content displays two tabs: "Thông tin người dùng" and "Quản lý vai trò người dùng"<br>5. Verify "Thông tin người dùng" tab shows: user name, full name, email, phone number, status, address, city, district, ward, date of birth (formatted as DD/MM/YYYY), note<br>6. Verify action buttons: "Ngừng hoạt động"/"Kích hoạt" (based on status), "Cập nhật thông tin"<br>7. Click "Quản lý vai trò người dùng" tab<br>8. Verify role list is displayed with checkboxes<br>9. Click row again to collapse | Row expands successfully when clicked. Expanded content shows all user details correctly. Tabs are functional. User information is displayed in organized layout. Role management tab shows available roles with checkboxes. Action buttons are visible. Row can be collapsed by clicking again. | User is logged in. User data exists |
| TC-USER-VIEW-008 | Verify reload data functionality and total count display | 1. Navigate to user management page<br>2. Wait for initial data to load<br>3. Note the total user count displayed<br>4. Click "Tải lại" button<br>5. Observe loading state<br>6. Wait for data to reload<br>7. Verify table data is refreshed<br>8. Verify total count "Tổng số người dùng: X" is updated correctly | Reload button is clickable. Button triggers data refresh. Table shows loading state during refresh. Data is refreshed from server. Total count is updated correctly based on current data. All user records are displayed correctly after reload. | User is logged in. Network connection is available |

## 2. Create User (10 test cases)

| Test Case ID | Test Case Description | Test Case Procedure | Expected Results | Pre-conditions |
|--------------|----------------------|---------------------|------------------|----------------|
| TC-USER-CREATE-001 | Verify Create User Drawer opens and displays correctly | 1. Navigate to user management page<br>2. Click "Thêm người dùng" button<br>3. Verify Create User Drawer opens<br>4. Verify drawer title "Thêm người dùng" is displayed<br>5. Verify "Tạo tài khoản cho nhân viên" switch is visible<br>6. Verify form fields are visible: Tên người dùng, Email, Họ và tên, Số điện thoại, Vai trò, Địa chỉ, Thành phố, Quận/Huyện, Phường/Xã, Ngày sinh, Ghi chú<br>7. Verify "Thêm người dùng" and "Hủy" buttons are visible | Create User Drawer opens successfully. Drawer displays with correct title. All form sections are visible. Form fields are displayed correctly. Action buttons are visible and properly styled. Switch for creating account for staff is displayed. | User is logged in with admin/staff role |
| TC-USER-CREATE-002 | Verify successful user creation with all required information | 1. Navigate to user management page<br>2. Click "Thêm người dùng" button<br>3. Fill in "Tên người dùng" field<br>4. Fill in "Email" field with valid email format<br>5. Fill in "Họ và tên" field<br>6. Fill in "Số điện thoại" field<br>7. Select role from "Vai trò" dropdown<br>8. Fill in optional fields (address, city, district, ward, date of birth, note)<br>9. Click "Thêm người dùng" button<br>10. Wait for API response | User is created successfully. All required fields are filled correctly. Success message "Tạo người dùng thành công!" is displayed. Drawer closes automatically. Table refreshes to show new user. New user appears in the list. | User is logged in with admin/staff role. Roles exist in the system |
| TC-USER-CREATE-003 | Verify user creation for staff member | 1. Navigate to user management page<br>2. Click "Thêm người dùng" button<br>3. Toggle "Tạo tài khoản cho nhân viên" switch to ON<br>4. Verify "Chọn nhân viên" dropdown appears<br>5. Select a staff member from dropdown<br>6. Verify "Họ và tên" and "Số điện thoại" fields are auto-filled<br>7. Fill in remaining required fields (user name, email, role)<br>8. Click "Thêm người dùng" button<br>9. Wait for API response | Switch functionality works correctly. Staff selection dropdown is displayed. Auto-fill works for full name and phone number. User is created successfully with staff association. Success message is displayed. New user is linked to selected staff. | User is logged in with admin/staff role. Staff members exist in the system |
| TC-USER-CREATE-004 | Verify validation error when required fields are empty | 1. Navigate to user management page<br>2. Click "Thêm người dùng" button<br>3. Leave all required fields empty<br>4. Click "Thêm người dùng" button<br>5. Verify validation errors are displayed for: Tên người dùng, Email, Họ và tên<br>6. Fill in some fields, leave others empty<br>7. Verify specific error messages appear | Form validation prevents submission. Error messages are displayed for empty required fields: "Tên người dùng là bắt buộc", "Email là bắt buộc", "Họ và tên là bắt buộc". Submit button does not trigger API call until all required fields are filled. | User is logged in |
| TC-USER-CREATE-005 | Verify validation error for invalid email format | 1. Navigate to user management page<br>2. Click "Thêm người dùng" button<br>3. Fill in other required fields<br>4. Enter invalid email format (e.g., "invalid-email" or "test@") in "Email" field<br>5. Click "Thêm người dùng" button<br>6. Verify validation error is displayed | Validation prevents submission. Error message "Email không hợp lệ" is displayed below Email field. Submit button does not trigger API call. User can correct the email format and resubmit. | User is logged in |
| TC-USER-CREATE-006 | Verify user creation with date of birth | 1. Navigate to user management page<br>2. Click "Thêm người dùng" button<br>3. Fill in all required fields<br>4. Select a date from "Ngày sinh" date picker<br>5. Verify selected date is displayed correctly<br>6. Click "Thêm người dùng" button<br>7. Wait for API response<br>8. Verify user is created with date of birth<br>9. Expand user row and verify date is displayed correctly | Date picker works correctly. Selected date is displayed in the field. User is created successfully with date of birth. Date is saved correctly. Date is displayed in expanded row view in DD/MM/YYYY format. | User is logged in with admin/staff role |
| TC-USER-CREATE-007 | Verify user creation with all address fields | 1. Navigate to user management page<br>2. Click "Thêm người dùng" button<br>3. Fill in all required fields<br>4. Fill in "Địa chỉ" field<br>5. Fill in "Thành phố" field<br>6. Fill in "Quận/Huyện" field<br>7. Fill in "Phường/Xã" field<br>8. Click "Thêm người dùng" button<br>9. Wait for API response<br>10. Verify user is created with address information<br>11. Expand user row and verify address fields are displayed | Address fields can be filled. All address fields are saved correctly. User is created successfully with complete address. Address information is displayed correctly in expanded row view. | User is logged in with admin/staff role |
| TC-USER-CREATE-008 | Verify user creation fails with duplicate email or username | 1. Navigate to user management page<br>2. Click "Thêm người dùng" button<br>3. Enter email that already exists in the system<br>4. Enter username that already exists in the system<br>5. Fill all other required fields<br>6. Click "Thêm người dùng" button<br>7. Wait for API response<br>8. Verify error message is displayed | User creation fails. Error message from API (e.g., "Email đã tồn tại" or "Tên người dùng đã tồn tại") is displayed. Field-specific error messages are shown on corresponding fields. User remains in drawer. User can correct the duplicate information. | User is logged in with admin/staff role. User with same email or username already exists |
| TC-USER-CREATE-009 | Verify cancel user creation and drawer cleanup | 1. Navigate to user management page<br>2. Click "Thêm người dùng" button<br>3. Fill in user name, email, full name, and other fields<br>4. Toggle staff switch and select staff (if applicable)<br>5. Click "Hủy" button or close drawer<br>6. Verify drawer closes<br>7. Verify form is reset<br>8. Open drawer again<br>9. Verify form is empty | Drawer closes successfully. All form fields are reset. Staff switch is reset to OFF. Selected staff is cleared. Form state is cleared. Opening drawer again shows empty form. No data persists after cancellation. | User is logged in with admin/staff role |
| TC-USER-CREATE-010 | Verify loading state during user creation | 1. Navigate to user management page<br>2. Click "Thêm người dùng" button<br>3. Fill all form fields with valid data<br>4. Click "Thêm người dùng" button<br>5. Observe button state immediately after click<br>6. Verify loading state during API call | "Thêm người dùng" button shows loading spinner. Button is disabled during submission. Form fields are disabled during submission. Loading state disappears after API response (success or error). | User is logged in with admin/staff role. Valid data entered. Network connection is available |

## 3. Update User (8 test cases)

| Test Case ID | Test Case Description | Test Case Procedure | Expected Results | Pre-conditions |
|--------------|----------------------|---------------------|------------------|----------------|
| TC-USER-UPDATE-001 | Verify Update User Drawer opens with pre-filled data | 1. Navigate to user management page<br>2. Wait for user list to load<br>3. Expand a user row<br>4. Click "Cập nhật thông tin" button<br>5. Verify Update User Drawer opens<br>6. Verify drawer title "Cập nhật người dùng" is displayed<br>7. Verify form fields are pre-filled with current user data: user name, email, full name, phone number, role, address, city, district, ward, date of birth, note | Update User Drawer opens successfully. Drawer displays with correct title. All form fields are pre-filled with current user information. Date of birth is formatted correctly in date picker. Form is ready for editing. | User is logged in. User data exists |
| TC-USER-UPDATE-002 | Verify successful user update with modified information | 1. Navigate to user management page<br>2. Expand a user row<br>3. Click "Cập nhật thông tin" button<br>4. Modify user name<br>5. Change email<br>6. Update full name<br>7. Update phone number<br>8. Change role<br>9. Update address fields<br>10. Click "Lưu thay đổi" button<br>11. Wait for API response<br>12. Verify table refreshes with updated data | User is updated successfully. Modified fields are saved correctly. Success message "Cập nhật người dùng thành công!" is displayed. Drawer closes automatically. Table refreshes to show updated information. Updated data is displayed correctly in table and expanded row. | User is logged in. User data exists |
| TC-USER-UPDATE-003 | Verify updating user date of birth | 1. Navigate to user management page<br>2. Expand a user row<br>3. Click "Cập nhật thông tin" button<br>4. Verify current date of birth is displayed<br>5. Select a new date from date picker<br>6. Verify new date is displayed<br>7. Click "Lưu thay đổi" button<br>8. Verify date of birth is updated<br>9. Expand user row again and verify date is displayed correctly | Current date of birth is displayed correctly. Date picker allows selection of new date. User is updated with new date of birth. Success message is displayed. Updated date is shown in expanded row view in DD/MM/YYYY format. | User is logged in. User exists with date of birth |
| TC-USER-UPDATE-004 | Verify updating user address information | 1. Navigate to user management page<br>2. Expand a user row<br>3. Click "Cập nhật thông tin" button<br>4. Verify current address fields are displayed<br>5. Update "Địa chỉ" field<br>6. Update "Thành phố" field<br>7. Update "Quận/Huyện" field<br>8. Update "Phường/Xã" field<br>9. Click "Lưu thay đổi" button<br>10. Verify address information is updated<br>11. Expand user row and verify updated address | Current address fields are displayed correctly. All address fields can be updated. User is updated successfully with new address information. Success message is displayed. Updated address is shown correctly in expanded row view. | User is logged in. User data exists |
| TC-USER-UPDATE-005 | Verify validation errors when updating with invalid data | 1. Navigate to user management page<br>2. Expand a user row<br>3. Click "Cập nhật thông tin" button<br>4. Clear "Tên người dùng" field<br>5. Clear "Email" field<br>6. Enter invalid email format<br>7. Clear "Họ và tên" field<br>8. Click "Lưu thay đổi" button<br>9. Verify validation errors are displayed | Form validation prevents submission. Error messages are displayed: "Tên người dùng là bắt buộc", "Email là bắt buộc", "Email không hợp lệ", "Họ và tên là bắt buộc". Submit button does not trigger API call. User can correct errors and resubmit. | User is logged in. User data exists |
| TC-USER-UPDATE-006 | Verify updating user role | 1. Navigate to user management page<br>2. Expand a user row<br>3. Click "Cập nhật thông tin" button<br>4. Verify current role is selected<br>5. Change role to different option<br>6. Click "Lưu thay đổi" button<br>7. Verify role is updated<br>8. Verify role is displayed correctly in table (as tags) | Current role is displayed correctly. Role can be changed. All role options are available. User is updated with new role. Success message is displayed. Updated role is shown in table as tag(s). | User is logged in. User data exists. Multiple roles exist in the system |
| TC-USER-UPDATE-007 | Verify updating user note | 1. Navigate to user management page<br>2. Expand a user row<br>3. Click "Cập nhật thông tin" button<br>4. Verify current note is displayed (if any)<br>5. Update "Ghi chú" field with new text<br>6. Click "Lưu thay đổi" button<br>7. Verify note is updated<br>8. Expand user row and verify updated note is displayed | Current note is displayed correctly. Note field can be updated. User is updated successfully with new note. Success message is displayed. Updated note is shown in expanded row view. | User is logged in. User data exists |
| TC-USER-UPDATE-008 | Verify cancel update and data persistence | 1. Navigate to user management page<br>2. Expand a user row<br>3. Click "Cập nhật thông tin" button<br>4. Modify user name, email, role, and other fields<br>5. Update date of birth<br>6. Click "Hủy" button or close drawer<br>7. Verify drawer closes<br>8. Verify changes are not saved<br>9. Expand user row again<br>10. Click "Cập nhật thông tin" button<br>11. Verify original data is still displayed | Drawer closes successfully. Changes are not saved. Original user data remains unchanged. Opening update drawer again shows original data. No modifications are persisted. User information in table and expanded row remains unchanged. | User is logged in. User data exists |

## 4. Update User Status (8 test cases)

| Test Case ID | Test Case Description | Test Case Procedure | Expected Results | Pre-conditions |
|--------------|----------------------|---------------------|------------------|----------------|
| TC-USER-STATUS-001 | Verify change user status to Inactive | 1. Navigate to user management page<br>2. Wait for user list to load<br>3. Expand a user row with status "Active"<br>4. Verify "Ngừng hoạt động" button is visible<br>5. Click "Ngừng hoạt động" button<br>6. Verify confirmation modal appears with title "Xác nhận"<br>7. Verify modal message: "Bạn có chắc chắn muốn ngừng hoạt động người dùng này?"<br>8. Verify warning message: "Lưu ý: Người dùng này sẽ không thể đăng nhập vào hệ thống sau khi ngừng hoạt động."<br>9. Click "Xác nhận" in confirmation modal<br>10. Wait for API response<br>11. Verify user status changes to "Không hoạt động" (red color)<br>12. Verify "Ngừng hoạt động" button is hidden, "Kích hoạt" button appears | Confirmation modal appears correctly with warning message. Status is updated to "Inactive" successfully. Success message "Cập nhật trạng thái người dùng thành công!" is displayed. Status column shows "Không hoạt động" in red. Button visibility is updated correctly. Table refreshes to show new status. Expanded row status is also updated. | User is logged in. User exists with status Active |
| TC-USER-STATUS-002 | Verify change user status to Active | 1. Navigate to user management page<br>2. Wait for user list to load<br>3. Expand a user row with status "Inactive"<br>4. Verify "Kích hoạt" button is visible<br>5. Click "Kích hoạt" button<br>6. Verify confirmation modal appears with title "Xác nhận"<br>7. Verify modal message: "Bạn có chắc chắn muốn kích hoạt người dùng này?"<br>8. Click "Xác nhận" in confirmation modal<br>9. Wait for API response<br>10. Verify user status changes to "Đang hoạt động" (green color)<br>11. Verify "Kích hoạt" button is hidden, "Ngừng hoạt động" button appears | Confirmation modal appears. Status is updated to "Active" successfully. Success message "Cập nhật trạng thái người dùng thành công!" is displayed. Status column shows "Đang hoạt động" in green. Button visibility is updated correctly. Table refreshes to show new status. Expanded row status is also updated. | User is logged in. User exists with status Inactive |
| TC-USER-STATUS-003 | Verify status change button visibility based on current status | 1. Navigate to user management page<br>2. Wait for user list to load<br>3. Expand a user row with status "Active"<br>4. Verify "Ngừng hoạt động" button is visible<br>5. Verify "Kích hoạt" button is hidden<br>6. Expand a user row with status "Inactive"<br>7. Verify "Kích hoạt" button is visible<br>8. Verify "Ngừng hoạt động" button is hidden | Button visibility is correct based on current status. Active users show "Ngừng hoạt động" button. Inactive users show "Kích hoạt" button. Appropriate buttons are hidden for each status. | User is logged in. Users exist with different statuses |
| TC-USER-STATUS-004 | Verify cancel status change in confirmation modal | 1. Navigate to user management page<br>2. Wait for user list to load<br>3. Expand a user row<br>4. Click a status change button (e.g., "Ngừng hoạt động")<br>5. Verify confirmation modal appears<br>6. Click "Hủy" or close modal<br>7. Verify modal closes<br>8. Verify user status remains unchanged<br>9. Verify status in table is still the same | Confirmation modal can be cancelled. Modal closes without changes. User status remains unchanged. No API call is made. Table shows original status. User can try again if needed. | User is logged in. User exists |
| TC-USER-STATUS-005 | Verify status change updates table immediately | 1. Navigate to user management page<br>2. Wait for user list to load<br>3. Note current status of a user in the table<br>4. Expand the user row<br>5. Click status change button<br>6. Confirm in modal<br>7. Wait for API response<br>8. Verify status column in table is updated immediately<br>9. Verify status color is updated<br>10. Verify expanded row status is also updated | Status change updates table immediately. Status column shows new status. Status color is updated correctly (green for Active, red for Inactive). Expanded row status is synchronized. No page refresh is needed. Changes are reflected in real-time. | User is logged in. User exists |
| TC-USER-STATUS-006 | Verify error handling when status change fails | 1. Navigate to user management page<br>2. Wait for user list to load<br>3. Expand a user row<br>4. Click a status change button<br>5. Confirm in modal<br>6. Simulate API error (network error or server error)<br>7. Verify error message is displayed<br>8. Verify user status remains unchanged<br>9. Verify status in table is still the original status | Error message from API is displayed. User status remains unchanged. Table shows original status. User can retry the operation. Error handling works correctly. | User is logged in. User exists. Network error or server error occurs |
| TC-USER-STATUS-007 | Verify status change with multiple users in sequence | 1. Navigate to user management page<br>2. Wait for user list to load<br>3. Expand first user row<br>4. Change status (e.g., to Inactive)<br>5. Confirm and wait for success<br>6. Expand second user row<br>7. Change status (e.g., to Active)<br>8. Confirm and wait for success<br>9. Verify both status changes are applied correctly<br>10. Verify table shows correct statuses for both users | Multiple status changes work correctly in sequence. Each status change is processed independently. Success messages are displayed for each change. Table updates correctly for each user. No conflicts occur between changes. All changes are persisted correctly. | User is logged in. Multiple users exist with different statuses |
| TC-USER-STATUS-008 | Verify warning message in deactivation confirmation modal | 1. Navigate to user management page<br>2. Wait for user list to load<br>3. Expand a user row with status "Active"<br>4. Click "Ngừng hoạt động" button<br>5. Verify confirmation modal appears<br>6. Verify warning message is displayed in red: "Người dùng này sẽ không thể đăng nhập vào hệ thống sau khi ngừng hoạt động."<br>7. Verify message is bold and styled correctly<br>8. Click "Xác nhận" to proceed | Confirmation modal displays warning message correctly. Warning text is styled in red and bold. Message clearly indicates login restriction. User can proceed with confirmation or cancel. | User is logged in. User exists with status Active |

## 5. Assign Role (8 test cases)

| Test Case ID | Test Case Description | Test Case Procedure | Expected Results | Pre-conditions |
|--------------|----------------------|---------------------|------------------|----------------|
| TC-USER-ROLE-001 | Verify Role Management tab displays correctly | 1. Navigate to user management page<br>2. Wait for user list to load<br>3. Expand a user row<br>4. Click on "Quản lý vai trò người dùng" tab<br>5. Verify role list is displayed<br>6. Verify each role is shown as a list item with checkbox<br>7. Verify currently assigned roles have checked checkboxes<br>8. Verify unassigned roles have unchecked checkboxes<br>9. Verify "Tải lại" and "Xác nhận" buttons are visible | Role Management tab is displayed correctly. Role list is loaded and displayed. Checkboxes reflect current role assignments correctly. Assigned roles are checked. Unassigned roles are unchecked. Action buttons are visible and properly styled. | User is logged in. User data exists. Roles exist in the system |
| TC-USER-ROLE-002 | Verify role list loading state | 1. Navigate to user management page<br>2. Wait for user list to load<br>3. Expand a user row<br>4. Click on "Quản lý vai trò người dùng" tab<br>5. Observe loading state (if data is still loading)<br>6. Verify loading spinner is displayed<br>7. Wait for roles to load<br>8. Verify role list is displayed after loading | Loading state is displayed correctly when roles are being fetched. Loading spinner is shown in role list. Role list is displayed after data loads. No loading spinner is shown after data loads. | User is logged in. User data exists. Network connection is available |
| TC-USER-ROLE-003 | Verify assigning a role to user | 1. Navigate to user management page<br>2. Wait for user list to load<br>3. Expand a user row<br>4. Click on "Quản lý vai trò người dùng" tab<br>5. Wait for roles to load<br>6. Verify current role assignments<br>7. Check an unchecked role checkbox<br>8. Verify checkbox is checked<br>9. Click "Xác nhận" button<br>10. Wait for API response<br>11. Verify success message is displayed<br>12. Verify role is assigned to user | Role checkbox can be checked. Checkbox state changes correctly. Role assignment is saved successfully. Success message "Cập nhật vai trò người dùng thành công!" is displayed. Role is assigned to user. Updated roles are reflected in user table (role tags). | User is logged in. User data exists. Roles exist in the system |
| TC-USER-ROLE-004 | Verify removing a role from user | 1. Navigate to user management page<br>2. Wait for user list to load<br>3. Expand a user row with assigned roles<br>4. Click on "Quản lý vai trò người dùng" tab<br>5. Wait for roles to load<br>6. Verify currently assigned roles are checked<br>7. Uncheck a checked role checkbox<br>8. Verify checkbox is unchecked<br>9. Click "Xác nhận" button<br>10. Wait for API response<br>11. Verify success message is displayed<br>12. Verify role is removed from user | Role checkbox can be unchecked. Checkbox state changes correctly. Role removal is saved successfully. Success message "Cập nhật vai trò người dùng thành công!" is displayed. Role is removed from user. Updated roles are reflected in user table (role tags removed). | User is logged in. User exists with assigned roles |
| TC-USER-ROLE-005 | Verify assigning multiple roles to user | 1. Navigate to user management page<br>2. Wait for user list to load<br>3. Expand a user row<br>4. Click on "Quản lý vai trò người dùng" tab<br>5. Wait for roles to load<br>6. Check multiple unchecked role checkboxes<br>7. Verify all selected checkboxes are checked<br>8. Click "Xác nhận" button<br>9. Wait for API response<br>10. Verify all selected roles are assigned<br>11. Verify all roles are displayed in user table as tags | Multiple roles can be selected. All selected checkboxes are checked. Multiple role assignments are saved successfully. Success message is displayed. All selected roles are assigned to user. All roles are displayed in user table as separate tags. | User is logged in. User data exists. Multiple roles exist in the system |
| TC-USER-ROLE-006 | Verify removing all roles from user | 1. Navigate to user management page<br>2. Wait for user list to load<br>3. Expand a user row with multiple assigned roles<br>4. Click on "Quản lý vai trò người dùng" tab<br>5. Wait for roles to load<br>6. Uncheck all checked role checkboxes<br>7. Verify all checkboxes are unchecked<br>8. Click "Xác nhận" button<br>9. Wait for API response<br>10. Verify all roles are removed<br>11. Verify no role tags are displayed in user table | All role checkboxes can be unchecked. All roles can be removed from user. Role removal is saved successfully. Success message is displayed. User has no assigned roles. No role tags are displayed in user table. | User is logged in. User exists with multiple assigned roles |
| TC-USER-ROLE-007 | Verify reload roles functionality | 1. Navigate to user management page<br>2. Wait for user list to load<br>3. Expand a user row<br>4. Click on "Quản lý vai trò người dùng" tab<br>5. Wait for roles to load<br>6. Make some checkbox changes (do not save)<br>7. Click "Tải lại" button<br>8. Verify roles are reloaded<br>9. Verify checkbox states are reset to current assignments<br>10. Verify unsaved changes are discarded | Reload button is clickable. Button triggers role data refresh. Roles are reloaded from server. Checkbox states are reset to reflect current role assignments. Unsaved changes are discarded. Current role assignments are displayed correctly. | User is logged in. User data exists. Network connection is available |
| TC-USER-ROLE-008 | Verify error handling when role assignment fails | 1. Navigate to user management page<br>2. Wait for user list to load<br>3. Expand a user row<br>4. Click on "Quản lý vai trò người dùng" tab<br>5. Wait for roles to load<br>6. Check or uncheck a role checkbox<br>7. Click "Xác nhận" button<br>8. Simulate API error (network error or server error)<br>9. Verify error message is displayed<br>10. Verify role assignments remain unchanged<br>11. Verify checkbox states reflect original assignments | Error message from API is displayed. Role assignments remain unchanged. Checkbox states reflect original role assignments. User can retry the operation. Error handling works correctly. | User is logged in. User data exists. Network error or server error occurs |

